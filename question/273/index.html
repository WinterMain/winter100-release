<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>为什么++ [[]] [+ []] + [+ []]返回字符串“ 10”？ - Winter100</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KZ1S1HBYLX"></script>
<link rel="stylesheet" type="text/css" href="/iconfont/iconfont.css?t=20240930">
<link rel="stylesheet" href="/_nuxt/entry.CViwC5Qx.css">
<link rel="stylesheet" href="/_nuxt/default.CerbM5oS.css">
<link rel="stylesheet" href="/_nuxt/Main.DNckYZCw.css">
<link rel="stylesheet" href="/_nuxt/useLoadImages.Dl2Ckgx5.css">
<link rel="stylesheet" href="/_nuxt/NewList.B56uyASM.css">
<link rel="stylesheet" href="/_nuxt/all.BFkK1imR.css">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/question/273/_payload.json?ed1c41d3-4e7d-4d6a-b681-7520700beb9e">
<script src="/_nuxt/CrQvFcQD-legacy.js" nomodule crossorigin></script>
<script src="/_nuxt/BTVlhveG-legacy.js" nomodule crossorigin></script>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-KZ1S1HBYLX');
</script>
<meta property="og:title" content="为什么++ [[]] [+ []] + [+ []]返回字符串“ 10”？ - Winter100">
<meta name="description" content="这是有效的，并返回&quot;10&quot;JavaScript中的字符串（此处有更多示例）：



console.log(++[[]][+[]]+[+[]])




...">
<meta property="og:description" content="这是有效的，并返回&quot;10&quot;JavaScript中的字符串（此处有更多示例）：



console.log(++[[]][+[]]+[+[]])




...">
<meta property="og:image" content>
<meta name="twitter:card" content="summary_large_image">
<script type="module" src="/_nuxt/B2Id2dYO.js" crossorigin></script></head><body><div id="el-popper-container-1024"><!--teleport start anchor--><!--[--><div style="z-index:2001;position:absolute;left:0;top:0;width:120px;display:none;" class="el-popper is-light el-popover c-lang-legal-popover" tabindex="-1" aria-hidden="true"><!--[--><!--[--><!--[--><!--[--><!--v-if--><!--[--><div class="c-lang-legal-box"><div class="c-contain"><ul class="c-list"><!--[--><li class="item-list list-item-active"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">简体中文</div></li><li class="item-list false"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">繁体中文</div></li><li class="item-list false"><img src="/images/en.svg" class="mr-12"><div class="flex-shrink-0">English</div></li><!--]--></ul></div></div><!--]--><!--]--><span class="el-popper__arrow" style="position:absolute;" data-popper-arrow></span><!--]--><!--]--><!--]--></div><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--></div><div id="__nuxt"><!--[--><section class="el-container is-vertical l-home"><!--[--><div class="nuxt-loading-indicator" style="position:fixed;top:0;right:0;left:0;pointer-events:none;width:auto;height:3px;opacity:0;background:repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%);background-size:Infinity% auto;transform:scaleX(0%);transform-origin:left;transition:transform 0.1s, height 0.4s, opacity 0.4s;z-index:999999;"></div><!--[--><!----><!--]--><!--[--><!----><!--]--><div class="c-common-header"><header class="el-header c-common-header-inner" style=""><!--[--><a href="/" class="flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-40" src="/logo.svg"></a><div class="nav-items"><!--[--><!--[--><a href="/" class="nav-item">首页</a><!--]--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/about" class="nav-item">关于</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div><div class="flex-1"></div><div class="c-lang-legal xs:hidden"><!--[--><span class="relative ml-32 inline-flex items-center cursor-pointer border-gray-06 border px-8 py-4 rounded-8 el-tooltip__trigger el-tooltip__trigger"><img src="/images/cn.svg" class="mr-8"> 简体中文 <i class="el-icon ml-4 text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="m192 384 320 384 320-384z"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><i class="iconfont icon-caidan text-theme hover:opacity-70 text-28 hidden xs:block"></i><!--]--></header><!----></div><main class="l-default-home"><!--[--><div class="c-question-main"><div class="page-container pt-30 pb-60"><div class="c-outer"><div class="article-area"><h1 class="article-title">为什么++ [[]] [+ []] + [+ []]返回字符串“ 10”？</h1><p class="article-meta" style="color:#8590a6;"><span>LGO西里</span><i class="iconfont icon-time text-12 ml-12"></i><span>2020-03-09</span></p><div class="article-content code-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是有效的，并返回</font></font><code>"10"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript中</font><font style="vertical-align: inherit;">的字符串</font><font style="vertical-align: inherit;">（</font></font><a href="http://sla.ckers.org/forum/read.php?24,33349,33405" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处有更多示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>console.log(++[[]][+[]]+[+[]])</code></pre>
</div>
</div>
<p></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么？</font><font style="vertical-align: inherit;">这是怎么回事</font></font></p></div></div><div class="mt-20"><div class="discuss-wrapper"><div class="discuss-list"><!--[--><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">樱小小Tom</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逐步操作，</font></font><code>+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将value转换为数字，如果您将其添加到一个空数组中</font></font><code>+[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为它为空且等于</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它将</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以从那里开始，现在查看您的代码，它是</font></font><code>++[[]][+[]]+[+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他们之间有加号</font></font><code>++[[]][+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font><code>[+[]]</code></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以这些</font></font><code>[+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将返回，</font></font><code>[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它们有一个空数组，该数组将被转换为</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个数组内部...</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就像想象的那样，第一个值是一个</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二维</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组，其中包含一个数组...因此</font></font><code>[[]][+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于</font></font><code>[[]][0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回的值</font></font><code>[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后</font></font><code>++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其转换并增加到</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，您可以想象，</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font><code>"0"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>"10"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></p>

<p><a href="https://i.stack.imgur.com/XaLQ1.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/XaLQ1.png" alt="为什么返回字符串“ 10”？"></a></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">十三理查德</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能的最短方法是将表达式评估为没有数字的“ 10”：</font></font></p>

<p><code>+!+[] + [+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> //“ 10”</font></font></p>

<p><code>-~[] + [+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  //“ 10”</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// ==========说明========= \\</font></font></p>

<p><code>+!+[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>+[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为0。</font></font><code>!0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>+true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为1
 </font></font><code>-~[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= = </font></font><code>-(-1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></p>

<p><code>[+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>+[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为0。</font></font><code>[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是具有单个元素0的数组。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后JS计算</font></font><code>1 + [0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即</font></font><code>Number + Array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式。</font><font style="vertical-align: inherit;">然后ECMA规范起作用：</font></font><code>+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符通过</font></font><code>toString()/valueOf()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从基本</font></font><code>Object</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原型中</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">将两个操作数转换为字符串</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果一个表达式的两个操作数都只有数字，则它可以作为加法函数。</font><font style="vertical-align: inherit;">诀窍在于，数组可以轻松地将其元素转换为连接的字符串表示形式。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些例子：</font></font></p>

<pre><code>1 + {} //    "1[object Object]"<font></font>
1 + [] //    "1"<font></font>
1 + new Date() //    "1Wed Jun 19 2013 12:13:25 GMT+0400 (Caucasus Standard Time)"<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个很好的例外，有两个</font></font><code>Objects</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加法导致</font></font><code>NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre><code>[] + []   //    ""<font></font>
[1] + [2] //    "12"<font></font>
{} + {}   //    NaN<font></font>
{a:1} + {b:2}     //    NaN<font></font>
[1, {}] + [2, {}] //    "1,[object Object]2,[object Object]"<font></font>
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">米亚伽罗L</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一元加给定的字符串转换为数字 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定字符串的增量运算符将转换并递增1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[] ==”。</font><font style="vertical-align: inherit;">空字符串</font></font></li>
<li><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+''或+ []的值为0。</font></font></p>

<pre><code>++[[]][+[]]+[+[]] = 10 <font></font>
++[''][0] + [0] : First part is gives zeroth element of the array which is empty string <font></font>
1+0 <font></font>
10<font></font>
</code></pre></li>
</ol></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">乐A</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ []的计算结果为0 [...]，然后将其与任何内容求和（+操作），将数组内容转换为其字符串表示形式，该字符串表示形式包含用逗号连接的元素。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像获取数组索引（具有比+操作更高的优先级）之类的其他东西都是有序的，没什么有趣的。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">乐小小</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><pre><code>++[[]][+[]] =&gt; 1 // [+[]] = [0], ++0 = 1<font></font>
[+[]] =&gt; [0]<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后我们有一个字符串连接</font></font></p>

<pre><code>1+[0].toString() = 10
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">→笑里藏刀↓</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该评估结果相同但略小</font></font></p>

<pre><code>+!![]+''+(+[])
</code></pre>

<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]-是转换后的数组，当您对其进行添加或减去时会转换为0，因此+ [] = 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！[]-评估为false，因此!! []评估为true</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ !! []-将true转换为计算为true的数值，因此在这种情况下为1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+''-将空字符串附加到表达式中，导致数字转换为字符串</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ []-计算为0</font></font></li>
</ul>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以估计</font></font></p>

<pre><code>+(true) + '' + (0)<font></font>
1 + '' + 0<font></font>
"10"<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以现在您明白了，尝试以下方法：</font></font></p>

<pre><code>_=$=+[],++_+''+$
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神无老丝Davaid</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下内容是根据一个</font></font><a href="http://tmik.co.uk/?p=672"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">博客帖子</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改编的，该</font><a href="http://tmik.co.uk/?p=672"><font style="vertical-align: inherit;">博客帖子</font></a><font style="vertical-align: inherit;">回答了我在此问题仍处于关闭状态时发布的该问题。</font><font style="vertical-align: inherit;">链接指向ECMAScript 3规范（的HTML副本），仍然是当今常用的Web浏览器中JavaScript的基线。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，发表评论：这种表达永远不会出现在任何（理智的）生产环境中，并且只能用作练习，以了解读者如何了解JavaScript的肮脏边缘。</font><font style="vertical-align: inherit;">JavaScript运算符在类型之间进行隐式转换的一般原理以及一些常见的转换都是有用的，但本例中的许多细节都没有。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该表达式</font></font><code>++[[]][+[]]+[+[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初看起来可能比较强悍和晦涩，但实际上相对容易分解为单独的表达式。</font><font style="vertical-align: inherit;">为了清楚起见，我在下面仅添加了括号。</font><font style="vertical-align: inherit;">我可以向您保证，他们什么都不会改变，但是如果您想验证这一点，请随时阅读有关</font></font><a href="http://bclary.com/2004/11/07/#a-11.1.6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分组运算符的信息</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，该表达式可以更清楚地写为</font></font></p>

<pre><code>( ++[[]][+[]] ) + ( [+[]] )
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打破这一下来，我们可以通过观察来简化</font></font><code>+[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算结果为</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了使自己满意，请检查</font></font><a href="http://bclary.com/2004/11/07/#a-11.4.6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一元+运算符，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并遵循略带曲折的轨迹，该轨迹最终以</font></font><a href="http://bclary.com/2004/11/07/#a-9.1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToPrimitive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将空数组转换为空字符串，然后最终</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font><a href="http://bclary.com/2004/11/07/#a-9.3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToNumber</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为空字符串</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">现在</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">我们可以代替</font><font style="vertical-align: inherit;">的每个实例</font></font><code>+[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre><code>( ++[[]][0] ) + [0]
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经更简单了。</font><font style="vertical-align: inherit;">至于</font></font><code>++[[]][0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是</font></font><a href="http://bclary.com/2004/11/07/#a-11.4.4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前缀增量运算符</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code>++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font><font style="vertical-align: inherit;">定义单个元素的数组</font><font style="vertical-align: inherit;">的</font></font><a href="http://bclary.com/2004/11/07/#a-11.1.4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组文字</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的组合，该</font><font style="vertical-align: inherit;">元素本身就是一个空数组（</font></font><code>[[]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和</font><font style="vertical-align: inherit;">在该数组文字所定义的数组上调用</font><font style="vertical-align: inherit;">的</font></font><a href="http://bclary.com/2004/11/07/#a-11.2.1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性访问器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code>[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>

<p>So, we can simplify <code>[[]][0]</code> to just <code>[]</code> and we have <code>++[]</code>, right? In fact, this is not the case because evaluating <code>++[]</code> throws an error, which may initially seem confusing. However, a little thought about the nature of <code>++</code> makes this clear: it’s used to increment a variable (e.g. <code>++i</code>) or an object property (e.g. <code>++obj.count</code>). Not only does it evaluate to a value, it also stores that value somewhere. In the case of <code>++[]</code>, it has nowhere to put the new value (whatever it may be) because there is no reference to an object property or variable to update. In spec terms, this is covered by the internal <a href="http://bclary.com/2004/11/07/#a-8.7.2">PutValue</a> operation, which is called by the prefix increment operator.</p>

<p>So then, what does <code>++[[]][0]</code> do? Well, by similar logic as <code>+[]</code>, the inner array is converted to <code>0</code> and this value is incremented by <code>1</code> to give us a final value of <code>1</code>. The value of property <code>0</code> in the outer array is updated to <code>1</code> and the whole expression evaluates to <code>1</code>.</p>

<p>This leaves us with</p>

<pre><code>1 + [0]
</code></pre>

<p>... which is a simple use of the <a href="http://bclary.com/2004/11/07/#a-11.6.1">addition operator</a>. Both operands are first <a href="http://bclary.com/2004/11/07/#a-9.1">converted to primitives</a> and if either primitive value is a string, string concatenation is performed, otherwise numeric addition is performed. <code>[0]</code> converts to <code>"0"</code>, so string concatenation is used, producing <code>"10"</code>.</p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，可能不会立即显而易见的是，覆盖的</font></font><code>toString()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>valueOf()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法之一</font></font><code>Array.prototype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将更改表达式的结果，因为在将对象转换为原始值时会同时检查和使用两者（如果存在）。</font><font style="vertical-align: inherit;">例如，以下</font></font></p>

<pre><code>Array.prototype.toString = function() {<font></font>
  return "foo";<font></font>
};<font></font>
++[[]][+[]]+[+[]]<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...产生</font></font><code>"NaNfoo"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为什么发生这种情况留给读者作为练习...</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">番长GO</span><span class="discuss-time">2020/03/09 20:19:11</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们简单点：</font></font></p>

<pre><code>++[[]][+[]]+[+[]] = "10"<font></font>
<font></font>
var a = [[]][+[]];<font></font>
var b = [+[]];<font></font>
<font></font>
// so a == [] and b == [0]<font></font>
<font></font>
++a;<font></font>
<font></font>
// then a == 1 and b is still that array [0]<font></font>
// when you sum the var a and an array, it will sum b as a string just like that:<font></font>
<font></font>
1 + "0" = "10"<font></font>
</code></pre></div><!----></div></div><!--]--></div></div></div><div class="c-block-comment"><script>window.blockCommentOptions = {
    root: &#39;discuss-wrapper&#39;,
    lang: &#39;zh_Hans_CN&#39;,
    locale: {&quot;discussTip&quot;:&quot;您的回答将提交至区块链中，开启Web3的大门。&quot;,&quot;discussInputTitle&quot;:&quot;回答&quot;,&quot;discussInputCommentPlaceholder&quot;:&quot;请输入回答...&quot;,&quot;discussInputCommentTip&quot;:&quot;请输入回答&quot;,&quot;discussSubmitting&quot;:&quot;您的回答正提交至区块链中...&quot;,&quot;totalTitle&quot;:&quot;共[num]条回答&quot;},
  };</script><script async src="/assets/js/block-comment.js"></script></div></div><div class="c-aside"><div class="fixed-area"><div class="question-list"><p class="title">最新问答</p><div class="body"><!--[--><div class="a-list-item"><a href="/question/4376" class=""><div class="inner-item"><!----><span class="flex-1">HTML5 Drag &amp; Drop 拖动时更改图标/光标</span></div><div class="text-12 text-theme mt-4">5 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4375" class=""><div class="inner-item"><!----><span class="flex-1">如何完全卸载 Node.js，然后从头重新安装 (Mac OS X)</span></div><div class="text-12 text-theme mt-4">25 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4342" class=""><div class="inner-item"><!----><span class="flex-1">MAC终端删除代理有效命令</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4338" class=""><div class="inner-item"><!----><span class="flex-1">vue动态路由跳转同一地址不刷新页面</span></div><div class="text-12 text-theme mt-4">0 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4336" class=""><div class="inner-item"><!----><span class="flex-1">NUXT引入tailwindcss报错Error: Expected an opening square bracket.</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><!--]--></div></div><div class="c-adsense side-adsense"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-9684175232031230" data-ad-slot="2002754568" data-ad-format="auto" data-full-width-responsive="true"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div></div><!--]--></main><div class="c-footer"><div class="common-footer-inner"><div class="logo-contract"><a href="/" class="inline-flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-50" src="/logo.svg"></a><div class="contacts"><!--[--><a class="contact-item" href="mailto:yldiswinter@gmail.com"><i class="iconfont icon-youxiang"></i></a><a class="contact-item" href="https://github.com/WinterMain"><i class="iconfont icon-github"></i></a><!--]--></div></div><div class="nav-area"><div class="pr-20"><p class="label"><span class="z-1">导航</span></p></div><div class="nav-items"><!--[--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div></div><div class="donate-area"><div class="pr-20"><p class="label"><span class="z-1">打赏</span></p></div><div class="donate-list"><!--[--><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/btc.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">BTC</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2</span></p></div></div><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/eth.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">ETH</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">0xff6FC30033269845d196cB48F6a0660598D218D8</span></p></div></div><!--]--></div></div><div class="flex-1 ml-20 flex justify-end xs:hidden"><div class="c-adsense mt-0"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;width:180px;height:180px" data-ad-client="ca-pub-9684175232031230" data-ad-slot="6637798878"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div><!--v-if--><!--]--></section><!--]--></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr id="__NUXT_DATA__" data-src="/question/273/_payload.json?ed1c41d3-4e7d-4d6a-b681-7520700beb9e">[{"state":1,"once":7,"_errors":8,"serverRendered":10,"path":11,"pinia":12,"prerenderedAt":43},["Reactive",2],{"$ssite-config":3},{"env":4,"name":5,"url":6},"production","Winter 100分","https://winter100.com/",["Set"],["ShallowReactive",9],{},true,"/question/273",["Reactive",13],{"lang":14,"main":27},{"langOptions":15,"lang":17,"defaultLang":17},[16,20,23],{"val":17,"text":18,"icon":19},"zh_Hans_CN","简体中文","/images/cn.svg",{"val":21,"text":22,"icon":19},"zh_Hant_HK","繁体中文",{"val":24,"text":25,"icon":26},"en_US","English","/images/en.svg",{"category":28,"nav":29,"likes":30,"donateCoins":31},"browserplugin","all",[],[32,36,40],{"coin":33,"address":34,"icon":35},"BTC","1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2","/images/btc.png",{"coin":37,"address":38,"icon":39},"ETH","0xff6FC30033269845d196cB48F6a0660598D218D8","/images/eth.png",{"coin":41,"address":38,"icon":42},"CET","/images/cet.png",1729398463920]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{MODE:"",NODE_ENV:"production",NAME:"winter100"},app:{baseURL:"/",buildId:"ed1c41d3-4e7d-4d6a-b681-7520700beb9e",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>