<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>使用&lt;input type =“ file”&gt;时限制文件格式？ - Winter100</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KZ1S1HBYLX"></script>
<link rel="stylesheet" type="text/css" href="/iconfont/iconfont.css?t=20240930">
<link rel="stylesheet" href="/_nuxt/entry.DrNe-4ui.css">
<link rel="stylesheet" href="/_nuxt/default.IGDD3AF_.css">
<link rel="stylesheet" href="/_nuxt/el-popper.K902zei-.css">
<link rel="stylesheet" href="/_nuxt/Donate.C61dBJSg.css">
<link rel="stylesheet" href="/_nuxt/Adsense.C3XXM3TO.css">
<link rel="stylesheet" href="/_nuxt/Main.DNckYZCw.css">
<link rel="stylesheet" href="/_nuxt/Discuss.DCbqPIzI.css">
<link rel="stylesheet" href="/_nuxt/NewList.B56uyASM.css">
<link rel="stylesheet" href="/_nuxt/useLoadImages.BFkK1imR.css">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/question/2026/_payload.json?a4e7ffa4-1106-4b54-8c76-c28eedce6141">
<script src="/_nuxt/xuoSwgeJ-legacy.js" nomodule crossorigin></script>
<script src="/_nuxt/BUrHG7Hw-legacy.js" nomodule crossorigin></script>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-KZ1S1HBYLX');
</script>
<meta property="og:title" content="使用<input type =“ file”>时限制文件格式？ - Winter100">
<meta name="description" content="当用户单击<input type=&quot;file&quot;>HTML元素中的“浏览”按钮时，我想限制可以从本机OS文件选择器选择的文件类型。我有一种感觉，这是不可能的...">
<meta property="og:description" content="当用户单击<input type=&quot;file&quot;>HTML元素中的“浏览”按钮时，我想限制可以从本机OS文件选择器选择的文件类型。我有一种感觉，这是不可能的...">
<meta property="og:image" content>
<meta name="twitter:card" content="summary_large_image">
<script type="module" src="/_nuxt/BvB2M4kZ.js" crossorigin></script></head><body><div id="el-popper-container-1024"><!--teleport start anchor--><!--[--><div style="z-index:2001;position:absolute;left:0;top:0;width:120px;display:none;" class="el-popper is-light el-popover c-lang-legal-popover" tabindex="-1" aria-hidden="true"><!--[--><!--[--><!--[--><!--[--><!--v-if--><!--[--><div class="c-lang-legal-box"><div class="c-contain"><ul class="c-list"><!--[--><li class="item-list list-item-active"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">简体中文</div></li><li class="item-list false"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">繁体中文</div></li><li class="item-list false"><img src="/images/en.svg" class="mr-12"><div class="flex-shrink-0">English</div></li><!--]--></ul></div></div><!--]--><!--]--><span class="el-popper__arrow" style="position:absolute;" data-popper-arrow></span><!--]--><!--]--><!--]--></div><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--></div><div id="__nuxt"><!--[--><section class="el-container is-vertical l-home"><!--[--><div class="nuxt-loading-indicator" style="position:fixed;top:0;right:0;left:0;pointer-events:none;width:auto;height:3px;opacity:0;background:repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%);background-size:Infinity% auto;transform:scaleX(0%);transform-origin:left;transition:transform 0.1s, height 0.4s, opacity 0.4s;z-index:999999;"></div><!--[--><!----><!--]--><!--[--><!----><!--]--><div class="c-common-header"><header class="el-header c-common-header-inner" style=""><!--[--><a href="/" class="flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-40" src="/logo.svg"></a><div class="nav-items"><!--[--><!--[--><a href="/" class="nav-item">首页</a><!--]--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/about" class="nav-item">关于</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div><div class="flex-1"></div><div class="c-lang-legal xs:hidden"><!--[--><span class="relative ml-32 inline-flex items-center cursor-pointer border-gray-06 border px-8 py-4 rounded-8 el-tooltip__trigger el-tooltip__trigger"><img src="/images/cn.svg" class="mr-8"> 简体中文 <i class="el-icon ml-4 text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="m192 384 320 384 320-384z"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><i class="iconfont icon-caidan text-theme hover:opacity-70 text-28 hidden xs:block"></i><!--]--></header><!----></div><main class="l-default-home"><!--[--><div class="c-question-main"><div class="page-container pt-30 pb-60"><div class="c-outer"><div class="article-area"><h1 class="article-title">使用&lt;input type =“ file”&gt;时限制文件格式？</h1><p class="article-meta" style="color:#8590a6;"><i class="iconfont icon-time text-12"></i><span>西里猿LEY</span><span>发布于2020/03/18 10:14:47</span></p><div class="article-content code-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当用户单击</font></font><code>&lt;input type="file"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML元素中</font><font style="vertical-align: inherit;">的“浏览”按钮时，我想限制可以从本机OS文件选择器选择的文件类型</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我有一种感觉，这是不可能的，但我想知道是否有</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个解决方案。</font><font style="vertical-align: inherit;">我只想保留HTML和JavaScript；</font><font style="vertical-align: inherit;">请不要使用Flash。</font></font></p></div></div><div class="mt-20"><div class="discuss-wrapper"><div class="discuss-list"><!--[--><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Green樱</span><span class="discuss-time">2020/03/18 10:14:48</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您实际上可以使用javascript做到这一点，但请记住js是客户端，因此，如果您要避免（如您所说的那样限制或限制）某些类型的文件，您实际上会在“警告用户”他们可以上传的文件类型。做它在服务器端。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您想开始使用服务器端验证，</font><font style="vertical-align: inherit;">请看一下</font></font><a href="http://php.about.com/od/advancedphp/ss/php_file_upload_4.htm" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个基本教程</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于整个教程，请访问</font></font><a href="http://php.about.com/od/advancedphp/ss/php_file_upload.htm" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">祝好运！</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">前端小胖JinJin</span><span class="discuss-time">2020/03/18 10:14:47</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我建议如下：</font></font></p>

<ul>
<li><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果必须让用户默认选择任何图像文件，请使用accept =“ image / *”</font></font></p>

<p><code>&lt;input type="file" accept="image/*" /&gt;</code></p></li>
<li><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您想限制特定的图像类型，请使用accept =“ image / bmp，image / jpeg，image / png”</font></font></p>

<p><code>&lt;input type="file" accept="image/bmp, image/jpeg, image/png" /&gt;</code></p></li>
<li><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您想限制为特定类型，请使用accept =“。bmp，.doc，.pdf”</font></font></p>

<p><code>&lt;input type="file" accept=".bmp, .doc, .pdf" /&gt;</code></p></li>
<li><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您不能限制用户将文件文件管理器更改为所有文件，因此请始终在脚本和服务器中验证文件类型</font></font></p></li>
</ul></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">樱西里猴子</span><span class="discuss-time">2020/03/18 10:14:47</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前面的答案中所述，我们不能限制用户仅选择给定文件格式的文件。</font><font style="vertical-align: inherit;">但是使用html中的file属性上的accept标签确实很方便。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至于验证，我们必须在服务器端进行。</font><font style="vertical-align: inherit;">我们也可以在js的客户端执行此操作，但这不是万无一失的解决方案。</font><font style="vertical-align: inherit;">我们必须在服务器端进行验证。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于这些需求，我确实更喜欢struts2 Java Web应用程序开发框架。</font><font style="vertical-align: inherit;">借助其内置的文件上传功能，将文件上传到基于struts2的Web应用程序可谓小菜一碟。</font><font style="vertical-align: inherit;">只需提及我们希望在应用程序中接受的文件格式，其余所有内容都由框架本身的核心负责。</font><font style="vertical-align: inherit;">您可以在struts官方网站上进行检查。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Gil村村</span><span class="discuss-time">2020/03/18 10:14:47</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签与</font></font><code>accept</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性一起</font><font style="vertical-align: inherit;">使用</font></font></p>

<pre><code>&lt;input type="file" name="my-image" id="image" accept="image/gif, image/jpeg, image/png" /&gt;
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><a href="http://caniuse.com/#feat=input-file-accept" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处以获取最新的浏览器兼容性表</font></font></a> </p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现场演示</font></font><a href="http://jsfiddle.net/rb1n9bfe/" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要仅选择图像文件，可以使用此 </font></font><code>accept="image/*"</code></p>

<pre><code>&lt;input type="file" name="my-image" id="image" accept="image/*" /&gt;
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现场演示</font></font><a href="http://www.wufoo.com/html5/attributes/07-accept.html" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a></p>

<p><a href="https://i.stack.imgur.com/FWFiw.png" rel="noreferrer"><img src="https://i.stack.imgur.com/FWFiw.png" alt="仅会显示gif，jpg和png，Chrome 44版的屏幕截图"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仅会显示gif，jpg和png，Chrome 44版的屏幕截图</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Tom老丝Pro</span><span class="discuss-time">2020/03/18 10:14:47</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">严格来说，答案是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否定的</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">开发人员</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阻止用户在本机OS文件选择对话框中选择任何类型或扩展名的文件。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，仍然</font><font style="vertical-align: inherit;">可以使用</font><font style="vertical-align: inherit;">的</font></font><strong><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accept</font></font></a></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font><code>&lt;input type = "file"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在OS的文件选择对话框中提供过滤器。</font><font style="vertical-align: inherit;">例如，</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="false" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!-- (IE 10+, Edge (EdgeHTML), Edge (Chromium), Chrome, Firefox 42+) --&gt;<font></font>
&lt;input type="file" accept=".xls,.xlsx" /&gt;</code></pre>
</div>
</div>
<p></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该提供一种过滤掉.xls或.xlsx以外的文件的方法。</font><font style="vertical-align: inherit;">尽管</font><font style="vertical-align: inherit;">element </font><font style="vertical-align: inherit;">的</font></font><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MDN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">始终表示支持此功能，但令我惊讶的是，直到42版，此功能才在Firefox中对我不起作用。该功能在IE 10 +，Edge和Chrome中有效。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，为了支持早于IE 42+的Firefox 42以及IE 10 +，Edge，Chrome和Opera，我认为最好使用逗号分隔的MIME类型列表：</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="false" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!-- (IE 10+, Edge (EdgeHTML), Edge (Chromium), Chrome, Firefox) --&gt;<font></font>
&lt;input type="file"<font></font>
 accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel" /&gt; </code></pre>
</div>
</div>
<p></p>

<p>[<strong>Edge</strong> (EdgeHTML) behavior: The file type filter dropdown shows the file types mentioned here, but is not the default in the dropdown. The default filter is <code>All files (*)</code>.]<br></p>

<p>You can also use asterisks in MIME-types. For example:</p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="false" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input type="file" accept="image/*" /&gt; &lt;!-- all image types --&gt; <font></font>
&lt;input type="file" accept="audio/*" /&gt; &lt;!-- all audio types --&gt; <font></font>
&lt;input type="file" accept="video/*" /&gt; &lt;!-- all video types --&gt; </code></pre>
</div>
</div>
<p></p>

<p>W3C <strong><a href="https://html.spec.whatwg.org/multipage/input.html#attr-input-accept" rel="noreferrer">recommends</a></strong> authors to specify both MIME-types and corresponding extensions in the <code>accept</code> attribute. So, the <strong>best</strong> approach is:<br></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="false" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!-- Right approach: Use both file extensions and corresponding MIME-types. --&gt;<font></font>
&lt;!-- (IE 10+, Edge (EdgeHTML), Edge (Chromium), Chrome, Firefox) --&gt;<font></font>
&lt;input type="file"<font></font>
 accept=".xls,.xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel" /&gt; </code></pre>
</div>
</div>
<p></p>

<p>JSFiddle of the same: <a href="http://jsfiddle.net/sachinjoseph/BkcKQ/" rel="noreferrer">here</a>.<br></p>

<p><strong>Reference:</strong> <a href="http://www.iana.org/assignments/media-types/media-types.xhtml" rel="noreferrer">List of MIME-types</a><br><br>
<strong>IMPORTANT:</strong> Using the <code>accept</code> attribute only provides a way of filtering in the files of types that are of interest. Browsers still allow users to choose files of any type. Additional (client-side) checks should be done (using JavaScript, one way would be <a href="https://stackoverflow.com/a/4329103/1724702">this</a>), and definitely file types <strong><em>MUST be verified on the server</em></strong>, using a combination of MIME-type using both the file extension and its binary signature (<a href="https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature">ASP.NET</a>, <a href="https://stackoverflow.com/questions/310714/how-to-check-file-types-of-uploaded-files-in-php">PHP</a>, <a href="https://stackoverflow.com/questions/4600679/detect-mime-type-of-uploaded-file-in-ruby">Ruby</a>, <a href="https://stackoverflow.com/questions/8666445/check-file-type-after-upload">Java</a>). You might also want to refer to <a href="http://en.wikipedia.org/wiki/List_of_file_signatures" rel="noreferrer">these</a> <a href="http://www.garykessler.net/library/file_sigs.html" rel="noreferrer">tables</a> for file types and their <a href="http://en.wikipedia.org/wiki/Magic_number_%28programming%29" rel="noreferrer">magic numbers</a>, to perform a more robust server-side verification.<br><br>
Here are <a href="https://stackoverflow.com/questions/3597082/how-is-a-website-hacked-by-a-maliciously-encoded-image-that-contained-a-php-scr">three</a> <a href="http://www.acunetix.com/websitesecurity/upload-forms-threat/" rel="noreferrer">good</a> <a href="http://www.hanselman.com/blog/BackToBasicsWhenAllowingUserUploadsDontAllowUploadsToExecuteCode.aspx" rel="noreferrer">reads</a> on file-uploads and security.</p>

<p><strong>EDIT:</strong>  Maybe file type verification using its binary signature can also be done on client side using JavaScript (rather than just by looking at the extension) using HTML5 File API, but still, the file must be verified on the server, because a malicious user will still be able to upload files by making a custom HTTP request.</p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神乐路易</span><span class="discuss-time">2020/03/18 10:14:47</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你是对的。</font><font style="vertical-align: inherit;">使用HTML是不可能的。</font><font style="vertical-align: inherit;">用户将能够选择他/她想要的任何文件。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以编写一段</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码来避免基于扩展名提交文件。</font><font style="vertical-align: inherit;">但是请记住，这绝不会阻止恶意用户提交他/她真正想要的任何文件。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就像是：</font></font></p>

<pre><code>function beforeSubmit()<font></font>
{<font></font>
    var fname = document.getElementById("ifile").value;<font></font>
    // check if fname has the desired extension<font></font>
    if (fname hasDesiredExtension) {<font></font>
        return true;<font></font>
    } else {<font></font>
        return false;<font></font>
    }<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML代码：</font></font></p>

<pre><code>&lt;form method="post" onsubmit="return beforeSubmit();"&gt;<font></font>
    &lt;input type="file" id="ifile" name="ifile"/&gt;<font></font>
&lt;/form&gt;<font></font>
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">十三前端Harry</span><span class="discuss-time">2020/03/18 10:14:47</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入标签具有accept属性。</font><font style="vertical-align: inherit;">但是，它绝对不可靠。</font><font style="vertical-align: inherit;">浏览器很可能将其视为“建议”，这意味着用户也将根据文件管理器进行预选择，仅显示所需的类型。</font><font style="vertical-align: inherit;">他们仍然可以选择“所有文件”并上传所需的任何文件。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;form&gt;<font></font>
    &lt;input type="file" name="pic" id="pic" accept="image/gif, image/jpeg" /&gt;<font></font>
&lt;/form&gt;</code></pre>
</div>
</div>
<p></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读</font></font><a href="http://www.w3.org/TR/html5/forms.html#attr-input-accept" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML5规范中的更多内容</font></font></a></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请记住，它仅用作用户查找正确文件的“帮助”。</font><font style="vertical-align: inherit;">每个用户都可以将他/她想要的任何请求发送到您的服务器。</font><font style="vertical-align: inherit;">您始终必须在服务器端验证所有内容。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，答案是：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不，</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能限制</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是您</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置预选择，但</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依靠它。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替代地或附加地，您可以通过使用JavaScript检查文件名（输入字段的值）来执行类似的操作，但这是无稽之谈，因为它不提供任何保护，也不会简化用户的选择。</font><font style="vertical-align: inherit;">它只会潜在地诱使网站管理员认为他/她受到了保护，并打开了一个安全漏洞。</font><font style="vertical-align: inherit;">对于具有备用文件扩展名（例如jpeg而不是jpg），大写或没有文件扩展名（在Linux系统中很常见）的用户来说，这可能会很麻烦。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">小小乐</span><span class="discuss-time">2020/03/18 10:14:47</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从技术上讲，您可以</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">上</font><font style="vertical-align: inherit;">指定</font></font><a href="http://www.w3.org/TR/html401/interact/forms.html#adef-accept"><code>accept</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（在</font></font><a href="http://dev.w3.org/html5/spec/states-of-the-type-attribute.html#attr-input-accept"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html5中为</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替代</font><a href="http://www.w3.org/TR/html401/interact/forms.html#adef-accept"><font style="vertical-align: inherit;">属性</font></a><font style="vertical-align: inherit;">）</font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但未正确支持</font><font style="vertical-align: inherit;">该</font><a href="http://www.w3.org/TR/html401/interact/forms.html#adef-accept"><font style="vertical-align: inherit;">属性</font></a><font style="vertical-align: inherit;">。</font></font></p></div><!----></div></div><!--]--></div></div></div><div class="c-block-comment"><script>window.blockCommentOptions = {
    root: &#39;discuss-wrapper&#39;,
    lang: &#39;zh_Hans_CN&#39;,
    locale: {&quot;discussTip&quot;:&quot;您的回答将提交至区块链中，开启Web3的大门。&quot;,&quot;discussInputTitle&quot;:&quot;回答&quot;,&quot;discussInputCommentPlaceholder&quot;:&quot;请输入回答...&quot;,&quot;discussInputCommentTip&quot;:&quot;请输入回答&quot;,&quot;discussSubmitting&quot;:&quot;您的回答正提交至区块链中...&quot;,&quot;totalTitle&quot;:&quot;共[num]条回答&quot;},
  };</script><script async src="/assets/js/block-comment.js"></script></div></div><div class="c-aside"><div class="fixed-area"><div class="question-list"><p class="title">最新问答</p><div class="body"><!--[--><div class="a-list-item"><a href="/question/4376" class=""><div class="inner-item"><!----><span class="flex-1">HTML5 Drag &amp; Drop 拖动时更改图标/光标</span></div><div class="text-12 text-theme mt-4">5 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4375" class=""><div class="inner-item"><!----><span class="flex-1">如何完全卸载 Node.js，然后从头重新安装 (Mac OS X)</span></div><div class="text-12 text-theme mt-4">25 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4342" class=""><div class="inner-item"><!----><span class="flex-1">MAC终端删除代理有效命令</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4338" class=""><div class="inner-item"><!----><span class="flex-1">vue动态路由跳转同一地址不刷新页面</span></div><div class="text-12 text-theme mt-4">0 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4336" class=""><div class="inner-item"><!----><span class="flex-1">NUXT引入tailwindcss报错Error: Expected an opening square bracket.</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><!--]--></div></div><div class="c-adsense side-adsense"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-9684175232031230" data-ad-slot="2002754568" data-ad-format="auto" data-full-width-responsive="true"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div></div><!--]--></main><div class="c-footer"><div class="common-footer-inner"><div class="logo-contract"><a href="/" class="inline-flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-50" src="/logo.svg"></a><div class="contacts"><!--[--><a class="contact-item" href="mailto:yldiswinter@gmail.com"><i class="iconfont icon-youxiang"></i></a><a class="contact-item" href="https://github.com/WinterMain"><i class="iconfont icon-github"></i></a><!--]--></div></div><div class="nav-area"><div class="pr-20"><p class="label"><span class="z-1">导航</span></p></div><div class="nav-items"><!--[--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div></div><div class="donate-area"><div class="pr-20"><p class="label"><span class="z-1">打赏</span></p></div><div class="donate-list"><!--[--><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/btc.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">BTC</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2</span></p></div></div><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/eth.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">ETH</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">0xff6FC30033269845d196cB48F6a0660598D218D8</span></p></div></div><!--]--></div></div><div class="flex-1 ml-20 flex justify-end xs:hidden"><div class="c-adsense mt-0"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;width:180px;height:180px" data-ad-client="ca-pub-9684175232031230" data-ad-slot="6637798878"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div><!--v-if--><!--]--></section><!--]--></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr id="__NUXT_DATA__" data-src="/question/2026/_payload.json?a4e7ffa4-1106-4b54-8c76-c28eedce6141">[{"state":1,"once":7,"_errors":8,"serverRendered":10,"path":11,"pinia":12,"prerenderedAt":43},["Reactive",2],{"$ssite-config":3},{"env":4,"name":5,"url":6},"production","Winter 100分","https://winter100.com/",["Set"],["ShallowReactive",9],{},true,"/question/2026",["Reactive",13],{"lang":14,"main":27},{"langOptions":15,"lang":17,"defaultLang":17},[16,20,23],{"val":17,"text":18,"icon":19},"zh_Hans_CN","简体中文","/images/cn.svg",{"val":21,"text":22,"icon":19},"zh_Hant_HK","繁体中文",{"val":24,"text":25,"icon":26},"en_US","English","/images/en.svg",{"category":28,"nav":29,"likes":30,"donateCoins":31},"browserplugin","all",[],[32,36,40],{"coin":33,"address":34,"icon":35},"BTC","1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2","/images/btc.png",{"coin":37,"address":38,"icon":39},"ETH","0xff6FC30033269845d196cB48F6a0660598D218D8","/images/eth.png",{"coin":41,"address":38,"icon":42},"CET","/images/cet.png",1728924543012]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{MODE:"",NODE_ENV:"production",NAME:"winter100"},app:{baseURL:"/",buildId:"a4e7ffa4-1106-4b54-8c76-c28eedce6141",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>