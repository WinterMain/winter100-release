<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>“ SyntaxError：JSON中位置0处的意外令牌&lt;” - Winter100</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KZ1S1HBYLX"></script>
<link rel="stylesheet" type="text/css" href="/iconfont/iconfont.css?t=20240930">
<link rel="stylesheet" href="/_nuxt/entry.CViwC5Qx.css">
<link rel="stylesheet" href="/_nuxt/default.CerbM5oS.css">
<link rel="stylesheet" href="/_nuxt/Main.DNckYZCw.css">
<link rel="stylesheet" href="/_nuxt/useLoadImages.Dl2Ckgx5.css">
<link rel="stylesheet" href="/_nuxt/NewList.B56uyASM.css">
<link rel="stylesheet" href="/_nuxt/all.BFkK1imR.css">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/question/638/_payload.json?ed1c41d3-4e7d-4d6a-b681-7520700beb9e">
<script src="/_nuxt/CrQvFcQD-legacy.js" nomodule crossorigin></script>
<script src="/_nuxt/BTVlhveG-legacy.js" nomodule crossorigin></script>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-KZ1S1HBYLX');
</script>
<meta property="og:title" content="“ SyntaxError：JSON中位置0处的意外令牌<” - Winter100">
<meta name="description" content="在处理类似于Facebook的内容提要的React应用程序组件中，我遇到了一个错误：


  Feed.js：94未定义“ parsererror”“ S...">
<meta property="og:description" content="在处理类似于Facebook的内容提要的React应用程序组件中，我遇到了一个错误：


  Feed.js：94未定义“ parsererror”“ S...">
<meta property="og:image" content>
<meta name="twitter:card" content="summary_large_image">
<script type="module" src="/_nuxt/B2Id2dYO.js" crossorigin></script></head><body><div id="el-popper-container-1024"><!--teleport start anchor--><!--[--><div style="z-index:2001;position:absolute;left:0;top:0;width:120px;display:none;" class="el-popper is-light el-popover c-lang-legal-popover" tabindex="-1" aria-hidden="true"><!--[--><!--[--><!--[--><!--[--><!--v-if--><!--[--><div class="c-lang-legal-box"><div class="c-contain"><ul class="c-list"><!--[--><li class="item-list list-item-active"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">简体中文</div></li><li class="item-list false"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">繁体中文</div></li><li class="item-list false"><img src="/images/en.svg" class="mr-12"><div class="flex-shrink-0">English</div></li><!--]--></ul></div></div><!--]--><!--]--><span class="el-popper__arrow" style="position:absolute;" data-popper-arrow></span><!--]--><!--]--><!--]--></div><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--></div><div id="__nuxt"><!--[--><section class="el-container is-vertical l-home"><!--[--><div class="nuxt-loading-indicator" style="position:fixed;top:0;right:0;left:0;pointer-events:none;width:auto;height:3px;opacity:0;background:repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%);background-size:Infinity% auto;transform:scaleX(0%);transform-origin:left;transition:transform 0.1s, height 0.4s, opacity 0.4s;z-index:999999;"></div><!--[--><!----><!--]--><!--[--><!----><!--]--><div class="c-common-header"><header class="el-header c-common-header-inner" style=""><!--[--><a href="/" class="flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-40" src="/logo.svg"></a><div class="nav-items"><!--[--><!--[--><a href="/" class="nav-item">首页</a><!--]--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/about" class="nav-item">关于</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div><div class="flex-1"></div><div class="c-lang-legal xs:hidden"><!--[--><span class="relative ml-32 inline-flex items-center cursor-pointer border-gray-06 border px-8 py-4 rounded-8 el-tooltip__trigger el-tooltip__trigger"><img src="/images/cn.svg" class="mr-8"> 简体中文 <i class="el-icon ml-4 text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="m192 384 320 384 320-384z"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><i class="iconfont icon-caidan text-theme hover:opacity-70 text-28 hidden xs:block"></i><!--]--></header><!----></div><main class="l-default-home"><!--[--><div class="c-question-main"><div class="page-container pt-30 pb-60"><div class="c-outer"><div class="article-area"><h1 class="article-title">“ SyntaxError：JSON中位置0处的意外令牌&lt;”</h1><p class="article-meta" style="color:#8590a6;"><span>Stafan小哥</span><i class="iconfont icon-time text-12 ml-12"></i><span>2020-03-11</span></p><div class="article-content code-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在处理类似于Facebook的内容提要的React应用程序组件中，我遇到了一个错误：</font></font></p>

<blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feed.js：94未定义“ parsererror”“ SyntaxError：JSON中位置0处的意外令牌&lt; </font></font></p>
</blockquote>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我遇到了类似的错误，事实证明这是render函数中HTML的错字，但这里似乎并非如此。 </font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更令人困惑的是，我将代码回滚到了较早的已知工作版本，但仍然遇到错误。 </font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feed.js：</font></font></p>

<pre><code>import React from 'react';<font></font>
<font></font>
var ThreadForm = React.createClass({<font></font>
  getInitialState: function () {<font></font>
    return {author: '', <font></font>
            text: '', <font></font>
            included: '',<font></font>
            victim: ''<font></font>
            }<font></font>
  },<font></font>
  handleAuthorChange: function (e) {<font></font>
    this.setState({author: e.target.value})<font></font>
  },<font></font>
  handleTextChange: function (e) {<font></font>
    this.setState({text: e.target.value})<font></font>
  },<font></font>
  handleIncludedChange: function (e) {<font></font>
    this.setState({included: e.target.value})<font></font>
  },<font></font>
  handleVictimChange: function (e) {<font></font>
    this.setState({victim: e.target.value})<font></font>
  },<font></font>
  handleSubmit: function (e) {<font></font>
    e.preventDefault()<font></font>
    var author = this.state.author.trim()<font></font>
    var text = this.state.text.trim()<font></font>
    var included = this.state.included.trim()<font></font>
    var victim = this.state.victim.trim()<font></font>
    if (!text || !author || !included || !victim) {<font></font>
      return<font></font>
    }<font></font>
    this.props.onThreadSubmit({author: author, <font></font>
                                text: text, <font></font>
                                included: included,<font></font>
                                victim: victim<font></font>
                              })<font></font>
    this.setState({author: '', <font></font>
                  text: '', <font></font>
                  included: '',<font></font>
                  victim: ''<font></font>
                  })<font></font>
  },<font></font>
  render: function () {<font></font>
    return (<font></font>
    &lt;form className="threadForm" onSubmit={this.handleSubmit}&gt;<font></font>
      &lt;input<font></font>
        type="text"<font></font>
        placeholder="Your name"<font></font>
        value={this.state.author}<font></font>
        onChange={this.handleAuthorChange} /&gt;<font></font>
      &lt;input<font></font>
        type="text"<font></font>
        placeholder="Say something..."<font></font>
        value={this.state.text}<font></font>
        onChange={this.handleTextChange} /&gt;<font></font>
      &lt;input<font></font>
        type="text"<font></font>
        placeholder="Name your victim"<font></font>
        value={this.state.victim}<font></font>
        onChange={this.handleVictimChange} /&gt;<font></font>
      &lt;input<font></font>
        type="text"<font></font>
        placeholder="Who can see?"<font></font>
        value={this.state.included}<font></font>
        onChange={this.handleIncludedChange} /&gt;<font></font>
      &lt;input type="submit" value="Post" /&gt;<font></font>
    &lt;/form&gt;<font></font>
    )<font></font>
  }<font></font>
})<font></font>
<font></font>
var ThreadsBox = React.createClass({<font></font>
  loadThreadsFromServer: function () {<font></font>
    $.ajax({<font></font>
      url: this.props.url,<font></font>
      dataType: 'json',<font></font>
      cache: false,<font></font>
      success: function (data) {<font></font>
        this.setState({data: data})<font></font>
      }.bind(this),<font></font>
      error: function (xhr, status, err) {<font></font>
        console.error(this.props.url, status, err.toString())<font></font>
      }.bind(this)<font></font>
    })<font></font>
  },<font></font>
  handleThreadSubmit: function (thread) {<font></font>
    var threads = this.state.data<font></font>
    var newThreads = threads.concat([thread])<font></font>
    this.setState({data: newThreads})<font></font>
    $.ajax({<font></font>
      url: this.props.url,<font></font>
      dataType: 'json',<font></font>
      type: 'POST',<font></font>
      data: thread,<font></font>
      success: function (data) {<font></font>
        this.setState({data: data})<font></font>
      }.bind(this),<font></font>
      error: function (xhr, status, err) {<font></font>
        this.setState({data: threads})<font></font>
        console.error(this.props.url, status, err.toString())<font></font>
      }.bind(this)<font></font>
    })<font></font>
  },<font></font>
  getInitialState: function () {<font></font>
    return {data: []}<font></font>
  },<font></font>
  componentDidMount: function () {<font></font>
    this.loadThreadsFromServer()<font></font>
    setInterval(this.loadThreadsFromServer, this.props.pollInterval)<font></font>
  },<font></font>
  render: function () {<font></font>
    return (<font></font>
    &lt;div className="threadsBox"&gt;<font></font>
      &lt;h1&gt;Feed&lt;/h1&gt;<font></font>
      &lt;div&gt;<font></font>
        &lt;ThreadForm onThreadSubmit={this.handleThreadSubmit} /&gt;<font></font>
      &lt;/div&gt;<font></font>
    &lt;/div&gt;<font></font>
    )<font></font>
  }<font></font>
})<font></font>
<font></font>
module.exports = ThreadsBox<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Chrome开发人员工具中，错误似乎是由以下功能引起的：</font></font></p>

<pre><code> loadThreadsFromServer: function loadThreadsFromServer() {<font></font>
    $.ajax({<font></font>
      url: this.props.url,<font></font>
      dataType: 'json',<font></font>
      cache: false,<font></font>
      success: function (data) {<font></font>
        this.setState({ data: data });<font></font>
      }.bind(this),<font></font>
      error: function (xhr, status, err) {<font></font>
        console.error(this.props.url, status, err.toString());<font></font>
      }.bind(this)<font></font>
    });<font></font>
  },<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用</font></font><code>console.error(this.props.url, status, err.toString()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下划线标出。</font></font></p>

<p>Since it looks like the error seems to have something to do with pulling JSON data from the server, I tried starting from a blank db, but the error persists. The error seems to be called in an infinite loop presumably as React continuously tries to connect to the server and eventually crashes the browser.</p>

<p>EDIT: </p>

<p>I've checked the server response with Chrome dev tools and Chrome REST client, and the data appears to be proper JSON.</p>

<p>EDIT 2:</p>

<p>It appears that though the intended API endpoint is indeed returning the correct JSON data and format, React is polling <code>http://localhost:3000/?_=1463499798727</code> instead of the expected <code>http://localhost:3001/api/threads</code>.</p>

<p>I am running a webpack hot-reload server on port 3000 with the express app running on port 3001 to return the backend data. What's frustrating here is that this was working correctly the last time I worked on it and can't find what I could have possibly changed to break it. </p></div></div><div class="mt-20"><div class="discuss-wrapper"><div class="discuss-list"><!--[--><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神乐十三</span><span class="discuss-time">2020/03/11 11:38:22</span></div><div class="discuss-comment"><blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON中的意外令牌&lt;位于位置0 </font></font></p>
</blockquote>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决此错误的简单方法是在</font></font><code>styles.less</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">写入注释</font><font style="vertical-align: inherit;">。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Harry逆天Eva</span><span class="discuss-time">2020/03/11 11:38:22</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就我而言（后端），我正在使用res.send（token）;</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我更改为res.send（data）时，一切都固定了；</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一切正常，并按预期进行发布，则可能需要检查一下，但是错误始终在您的前端弹出。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Pro逆天猿</span><span class="discuss-time">2020/03/11 11:38:22</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那些正在使用</font></font><code>create-react-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并尝试获取本地json文件的人。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与中的一样</font></font><code>create-react-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>webpack-dev-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于处理请求，并为每个请求提供服务</font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所以你越来越</font></font></p>

<blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SyntaxError：JSON中位置0处的意外令牌&lt;。</font></font></p>
</blockquote>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决此问题，您需要弹出应用程序并修改</font></font><code>webpack-dev-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置文件。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以从</font></font><a href="https://stackoverflow.com/questions/47368716/fetching-json-returns-error-uncaught-in-promise-syntaxerror-unexpected-token/55628120#55628120"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里开始</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">理查德Green</span><span class="discuss-time">2020/03/11 11:38:22</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这可能是由于您的JavaScript代码正在查看某些json响应而导致您收到了其他类似文本的信息。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">猪猪阿飞</span><span class="discuss-time">2020/03/11 11:38:22</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此错误的可能性是巨大的。 </font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就我而言，我发现该问题是由于添加</font></font><code>homepage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引起的。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值得检查：</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改中：</font></font></p>

<pre><code>homepage: "www.example.com"
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至</font></font></p>

<pre><code>hompage: ""   
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">TonySamGreen</span><span class="discuss-time">2020/03/11 11:38:22</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于某些人来说，这可能对您有所帮助：我在Wordpress REST API方面也有类似的经验。</font><font style="vertical-align: inherit;">我什至用邮差来检查我是否有正确的路由或端点。</font><font style="vertical-align: inherit;">后来我发现我不小心在脚本中放了一个“ echo”-钩子：</font></font></p>

<p><a href="https://www.screencast.com/t/AvM4tHy7lT3H" rel="nofollow noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试并检查您的控制台</font></font></a></p>

<p><a href="https://www.screencast.com/t/phTJbOqFo" rel="nofollow noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误原因</font></font></a> </p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，基本上，这意味着我打印的值不是与导致AJAX错误的脚本混合的JSON-“ SyntaxError：JSON位置0处的意外令牌r”</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">宝儿Pro</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在python中，您可以在将结果发送到html模板之前使用json.Dump（str）。</font><font style="vertical-align: inherit;">使用此命令字符串转换为正确的json格式并发送到html模板。</font><font style="vertical-align: inherit;">将结果发送到JSON.parse（result）之后，这是正确的响应，您可以使用它。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神无Davaid</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对我来说，当我作为JSON返回的对象的属性之一引发异常时，就会发生这种情况。</font></font></p>

<pre><code>public Dictionary&lt;string, int&gt; Clients { get; set; }<font></font>
public int CRCount<font></font>
{<font></font>
    get<font></font>
    {<font></font>
        var count = 0;<font></font>
        //throws when Clients is null<font></font>
        foreach (var c in Clients) {<font></font>
            count += c.Value;<font></font>
        }<font></font>
        return count;<font></font>
    }<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加一个空检查，为我修复了它：</font></font></p>

<pre><code>public Dictionary&lt;string, int&gt; Clients { get; set; }<font></font>
public int CRCount<font></font>
{<font></font>
    get<font></font>
    {<font></font>
        var count = 0;<font></font>
        if (Clients != null) {<font></font>
            foreach (var c in Clients) {<font></font>
                count += c.Value;<font></font>
            }<font></font>
        }<font></font>
        return count;<font></font>
    }<font></font>
}<font></font>
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神奇Davaid</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只是基本检查，请确保您在json文件中没有任何注释</font></font></p>

<pre><code>//comments here will not be parsed and throw error
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">TonyPro</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">花了很多时间后，我发现我的问题是在package.json文件上定义了“主页”，这导致我的应用无法在Firebase上运行（相同的“令牌”错误）。</font><font style="vertical-align: inherit;">我使用create-react-app创建了我的react应用，然后使用READ.me文件上的firebase指南部署到github页面，意识到我必须做额外的工作才能使路由器正常工作，然后切换到firebase。</font><font style="vertical-align: inherit;">github指南已在package.json上添加了主页密钥，并导致了部署问题。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">GOL蛋蛋</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保响应为JSON格式，否则会引发此错误。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">蛋蛋伽罗猿</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您将响应定义为</font></font><code>application/json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且正在获取HTML作为响应</font><font style="vertical-align: inherit;">时，会发生此错误</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">基本上，当您使用JSON响应为特定URL编写服务器端脚本但错误格式为HTML时，就会发生这种情况。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">满天星</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我遇到了此错误“ SyntaxError：JSON中的位置处出现意外的标记m”，其中标记“ m”可以是任何其他字符。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原来，当我使用RESTconsole进行数据库测试时，我错过了JSON对象中的双引号之一，例如{“ name：” math“}，正确的应该是{” name“：” math“}</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我花了很多精力来找出这个笨拙的错误。</font><font style="vertical-align: inherit;">恐怕其他人会遇到类似的麻烦。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">SamItachi阿飞</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以我为例，我正在运行此Webpack，结果证明是本地node_modules目录中某处的损坏。</font></font></p>

<pre><code>rm -rf node_modules<font></font>
npm install<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...足以使其再次正常工作。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">蛋蛋神乐</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这最终成为我的权限问题。</font><font style="vertical-align: inherit;">我试图通过Cancan访问未经授权的网址，因此该网址已切换为</font></font><code>users/sign_in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">重定向的网址会响应html，而不是json。</font><font style="vertical-align: inherit;">html响应中的第一个字符是</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Tony达蒙Mandy</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您正在从服务器返回HTML（或XML），但是</font></font><code>dataType: json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">告诉jQuery解析为JSON。</font><font style="vertical-align: inherit;">在Chrome开发者工具中检查“网络”标签，以查看服务器响应的内容。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Near神乐路易</span><span class="discuss-time">2020/03/11 11:38:21</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就我而言，该错误是由于我未将返回值分配给变量而导致的。</font><font style="vertical-align: inherit;">导致错误消息的原因如下：</font></font></p>

<pre><code>return new JavaScriptSerializer().Serialize("hello");
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我将其更改为：</font></font></p>

<pre><code>string H = "hello";<font></font>
return new JavaScriptSerializer().Serialize(H);<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有变量，JSON无法正确格式化数据。</font></font></p></div><!----></div></div><!--]--></div></div></div><div class="c-block-comment"><script>window.blockCommentOptions = {
    root: &#39;discuss-wrapper&#39;,
    lang: &#39;zh_Hans_CN&#39;,
    locale: {&quot;discussTip&quot;:&quot;您的回答将提交至区块链中，开启Web3的大门。&quot;,&quot;discussInputTitle&quot;:&quot;回答&quot;,&quot;discussInputCommentPlaceholder&quot;:&quot;请输入回答...&quot;,&quot;discussInputCommentTip&quot;:&quot;请输入回答&quot;,&quot;discussSubmitting&quot;:&quot;您的回答正提交至区块链中...&quot;,&quot;totalTitle&quot;:&quot;共[num]条回答&quot;},
  };</script><script async src="/assets/js/block-comment.js"></script></div></div><div class="c-aside"><div class="fixed-area"><div class="question-list"><p class="title">最新问答</p><div class="body"><!--[--><div class="a-list-item"><a href="/question/4376" class=""><div class="inner-item"><!----><span class="flex-1">HTML5 Drag &amp; Drop 拖动时更改图标/光标</span></div><div class="text-12 text-theme mt-4">5 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4375" class=""><div class="inner-item"><!----><span class="flex-1">如何完全卸载 Node.js，然后从头重新安装 (Mac OS X)</span></div><div class="text-12 text-theme mt-4">25 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4342" class=""><div class="inner-item"><!----><span class="flex-1">MAC终端删除代理有效命令</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4338" class=""><div class="inner-item"><!----><span class="flex-1">vue动态路由跳转同一地址不刷新页面</span></div><div class="text-12 text-theme mt-4">0 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4336" class=""><div class="inner-item"><!----><span class="flex-1">NUXT引入tailwindcss报错Error: Expected an opening square bracket.</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><!--]--></div></div><div class="c-adsense side-adsense"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-9684175232031230" data-ad-slot="2002754568" data-ad-format="auto" data-full-width-responsive="true"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div></div><!--]--></main><div class="c-footer"><div class="common-footer-inner"><div class="logo-contract"><a href="/" class="inline-flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-50" src="/logo.svg"></a><div class="contacts"><!--[--><a class="contact-item" href="mailto:yldiswinter@gmail.com"><i class="iconfont icon-youxiang"></i></a><a class="contact-item" href="https://github.com/WinterMain"><i class="iconfont icon-github"></i></a><!--]--></div></div><div class="nav-area"><div class="pr-20"><p class="label"><span class="z-1">导航</span></p></div><div class="nav-items"><!--[--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div></div><div class="donate-area"><div class="pr-20"><p class="label"><span class="z-1">打赏</span></p></div><div class="donate-list"><!--[--><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/btc.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">BTC</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2</span></p></div></div><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/eth.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">ETH</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">0xff6FC30033269845d196cB48F6a0660598D218D8</span></p></div></div><!--]--></div></div><div class="flex-1 ml-20 flex justify-end xs:hidden"><div class="c-adsense mt-0"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;width:180px;height:180px" data-ad-client="ca-pub-9684175232031230" data-ad-slot="6637798878"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div><!--v-if--><!--]--></section><!--]--></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr id="__NUXT_DATA__" data-src="/question/638/_payload.json?ed1c41d3-4e7d-4d6a-b681-7520700beb9e">[{"state":1,"once":7,"_errors":8,"serverRendered":10,"path":11,"pinia":12,"prerenderedAt":43},["Reactive",2],{"$ssite-config":3},{"env":4,"name":5,"url":6},"production","Winter 100分","https://winter100.com/",["Set"],["ShallowReactive",9],{},true,"/question/638",["Reactive",13],{"lang":14,"main":27},{"langOptions":15,"lang":17,"defaultLang":17},[16,20,23],{"val":17,"text":18,"icon":19},"zh_Hans_CN","简体中文","/images/cn.svg",{"val":21,"text":22,"icon":19},"zh_Hant_HK","繁体中文",{"val":24,"text":25,"icon":26},"en_US","English","/images/en.svg",{"category":28,"nav":29,"likes":30,"donateCoins":31},"browserplugin","all",[],[32,36,40],{"coin":33,"address":34,"icon":35},"BTC","1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2","/images/btc.png",{"coin":37,"address":38,"icon":39},"ETH","0xff6FC30033269845d196cB48F6a0660598D218D8","/images/eth.png",{"coin":41,"address":38,"icon":42},"CET","/images/cet.png",1729398435790]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{MODE:"",NODE_ENV:"production",NAME:"winter100"},app:{baseURL:"/",buildId:"ed1c41d3-4e7d-4d6a-b681-7520700beb9e",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>