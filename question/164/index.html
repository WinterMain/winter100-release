<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>JavaScript闭包如何工作？ - Winter100</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KZ1S1HBYLX"></script>
<link rel="stylesheet" type="text/css" href="/iconfont/iconfont.css?t=20240930">
<link rel="stylesheet" href="/_nuxt/entry.CViwC5Qx.css">
<link rel="stylesheet" href="/_nuxt/default.CerbM5oS.css">
<link rel="stylesheet" href="/_nuxt/Main.DNckYZCw.css">
<link rel="stylesheet" href="/_nuxt/useLoadImages.Dl2Ckgx5.css">
<link rel="stylesheet" href="/_nuxt/NewList.B56uyASM.css">
<link rel="stylesheet" href="/_nuxt/all.BFkK1imR.css">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/question/164/_payload.json?ed1c41d3-4e7d-4d6a-b681-7520700beb9e">
<script src="/_nuxt/CrQvFcQD-legacy.js" nomodule crossorigin></script>
<script src="/_nuxt/BTVlhveG-legacy.js" nomodule crossorigin></script>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-KZ1S1HBYLX');
</script>
<meta property="og:title" content="JavaScript闭包如何工作？ - Winter100">
<meta name="description" content="
             
                
                        
                    ...">
<meta property="og:description" content="
             
                
                        
                    ...">
<meta property="og:image" content>
<meta name="twitter:card" content="summary_large_image">
<script type="module" src="/_nuxt/B2Id2dYO.js" crossorigin></script></head><body><div id="el-popper-container-1024"><!--teleport start anchor--><!--[--><div style="z-index:2001;position:absolute;left:0;top:0;width:120px;display:none;" class="el-popper is-light el-popover c-lang-legal-popover" tabindex="-1" aria-hidden="true"><!--[--><!--[--><!--[--><!--[--><!--v-if--><!--[--><div class="c-lang-legal-box"><div class="c-contain"><ul class="c-list"><!--[--><li class="item-list list-item-active"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">简体中文</div></li><li class="item-list false"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">繁体中文</div></li><li class="item-list false"><img src="/images/en.svg" class="mr-12"><div class="flex-shrink-0">English</div></li><!--]--></ul></div></div><!--]--><!--]--><span class="el-popper__arrow" style="position:absolute;" data-popper-arrow></span><!--]--><!--]--><!--]--></div><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--></div><div id="__nuxt"><!--[--><section class="el-container is-vertical l-home"><!--[--><div class="nuxt-loading-indicator" style="position:fixed;top:0;right:0;left:0;pointer-events:none;width:auto;height:3px;opacity:0;background:repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%);background-size:Infinity% auto;transform:scaleX(0%);transform-origin:left;transition:transform 0.1s, height 0.4s, opacity 0.4s;z-index:999999;"></div><!--[--><!----><!--]--><!--[--><!----><!--]--><div class="c-common-header"><header class="el-header c-common-header-inner" style=""><!--[--><a href="/" class="flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-40" src="/logo.svg"></a><div class="nav-items"><!--[--><!--[--><a href="/" class="nav-item">首页</a><!--]--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/about" class="nav-item">关于</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div><div class="flex-1"></div><div class="c-lang-legal xs:hidden"><!--[--><span class="relative ml-32 inline-flex items-center cursor-pointer border-gray-06 border px-8 py-4 rounded-8 el-tooltip__trigger el-tooltip__trigger"><img src="/images/cn.svg" class="mr-8"> 简体中文 <i class="el-icon ml-4 text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="m192 384 320 384 320-384z"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><i class="iconfont icon-caidan text-theme hover:opacity-70 text-28 hidden xs:block"></i><!--]--></header><!----></div><main class="l-default-home"><!--[--><div class="c-question-main"><div class="page-container pt-30 pb-60"><div class="c-outer"><div class="article-area"><h1 class="article-title">JavaScript闭包如何工作？</h1><p class="article-meta" style="color:#8590a6;"><span>米亚神无</span><i class="iconfont icon-time text-12 ml-12"></i><span>2020-03-09</span></p><div class="article-content code-content"><aside class="s-notice s-notice__info js-post-notice mb16" aria-hidden="false" role="status">
            <div class="grid fd-column fw-nowrap"> 
                <div class="grid fw-nowrap">
                        <div class="grid--cell mr8">
                            <svg aria-hidden="true" class="svg-icon iconLock" width="18" height="18" viewBox="0 0 18 18"><path d="M16 9a2 2 0 0 0-2-2V6A5 5 0 0 0 4 6v1a2 2 0 0 0-2 2v6c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9zm-7 5a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm3.1-7H5.9V6a3.1 3.1 0 0 1 6.2 0v1z"></path></svg>
                        </div>
                    <div class="grid--cell fl1 lh-lg">
                        <div class="grid--cell fl1 lh-lg">
                            <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个问题的答案是</font></font><a href="/help/privileges/edit-community-wiki"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">社区的努力</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">编辑现有答案以改善此职位。</font><font style="vertical-align: inherit;">它目前不接受新的答案或互动。
                            
                        </font></font></div>
                    </div>
                </div>
                            </div>
                    </aside>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您将如何向了解其闭包概念（例如函数，变量等）的人解释JavaScript闭包，但却不了解闭包本身？</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我已经</font><font style="vertical-align: inherit;">在Wikipedia上</font><font style="vertical-align: inherit;">看到</font></font><a href="http://en.wikipedia.org/wiki/Scheme_%28programming_language%29" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了Scheme示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是不幸的是它没有帮助。</font></font></p></div></div><div class="mt-20"><div class="discuss-wrapper"><div class="discuss-list"><!--[--><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Tony樱番长</span><span class="discuss-time">2020/03/09 11:50:37</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我只是将它们指向</font></font><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mozilla Closures页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这</font><font style="vertical-align: inherit;">是我发现的关于闭包基础知识和实际用法</font><font style="vertical-align: inherit;">的最佳，最</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简洁明了的解释</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">强烈建议任何学习JavaScript的人使用。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的，我什至推荐给6岁的孩子使用-如果6岁的孩子正在学习闭包，那么可以随时理解</font><font style="vertical-align: inherit;">本文提供</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简洁明了</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的逻辑是合乎逻辑</font><font style="vertical-align: inherit;">的。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Stafan古一</span><span class="discuss-time">2020/03/09 11:50:37</span></div><div class="discuss-comment"><p>The author of <em><a href="http://javascript.info/tutorial/closures" rel="noreferrer">Closures</a></em> has explained closures pretty well, explaining the reason why we need them and also explaining LexicalEnvironment which is necessary to understanding closures. <br>
Here is the summary:</p>

<p>What if a variable is accessed, but it isn’t local? Like here:</p>

<p><a href="https://i.stack.imgur.com/SLlVB.png" rel="noreferrer"><img src="https://i.stack.imgur.com/SLlVB.png" alt="在此处输入图片说明"></a></p>

<p>In this case, the interpreter finds the variable in the
outer <a href="http://javascript.info/tutorial/initialization" rel="noreferrer"><code>LexicalEnvironment</code></a> object.</p>

<p>The process consists of two steps:</p>

<ol>
<li>First, when a function f is created, it is not created in an empty
space. There is a current LexicalEnvironment object. In the case
above, it’s window (a is undefined at the time of function
creation).</li>
</ol>

<p><a href="https://i.stack.imgur.com/0KBin.png" rel="noreferrer"><img src="https://i.stack.imgur.com/0KBin.png" alt="在此处输入图片说明"></a></p>

<p>When a function is created, it gets a hidden property, named [[Scope]], which references the current LexicalEnvironment.</p>

<p><a href="https://i.stack.imgur.com/U3yt7.png" rel="noreferrer"><img src="https://i.stack.imgur.com/U3yt7.png" alt="在此处输入图片说明"></a></p>

<p>If a variable is read, but can not be found anywhere, an error is generated.</p>

<p><strong>Nested functions</strong></p>

<p>Functions can be nested one inside another, forming a chain of LexicalEnvironments which can also be called a scope chain.</p>

<p><a href="https://i.stack.imgur.com/2hUwr.png" rel="noreferrer"><img src="https://i.stack.imgur.com/2hUwr.png" alt="在此处输入图片说明"></a></p>

<p>So, function g has access to g, a and f.</p>

<p><strong>Closures</strong></p>

<p>A nested function may continue to live after the outer function has finished:</p>

<p><a href="https://i.stack.imgur.com/S1mlB.png" rel="noreferrer"><img src="https://i.stack.imgur.com/S1mlB.png" alt="在此处输入图片说明"></a></p>

<p>Marking up LexicalEnvironments:</p>

<p><a href="https://i.stack.imgur.com/BzUNi.png" rel="noreferrer"><img src="https://i.stack.imgur.com/BzUNi.png" alt="在此处输入图片说明"></a></p>

<p>As we see, <code>this.say</code> is a property in the user object, so it continues to live after User completed.</p>

<p>And if you remember, when <code>this.say</code> is created, it (as every function) gets an internal reference <code>this.say.[[Scope]]</code> to the current LexicalEnvironment. So, the LexicalEnvironment of the current User execution stays in memory. All variables of User also are its properties, so they are also carefully kept, not junked as usually.</p>

<p><strong>The whole point is to ensure that if the inner function wants to access an outer variable in the future, it is able to do so.</strong></p>

<p>To summarize:</p>

<ol>
<li>The inner function keeps a reference to the outer
LexicalEnvironment.</li>
<li>The inner function may access variables from it
any time even if the outer function is finished.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览器将LexicalEnvironment及其所有属性（变量）保留在内存中，直到有一个内部函数引用它为止。</font></font></li>
</ol>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这称为关闭。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">--神经Xiao--</span><span class="discuss-time">2020/03/09 11:50:37</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个六岁孩子的答案（假设他知道什么是函数，什么是变量以及什么数据）：</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数可以返回数据。</font><font style="vertical-align: inherit;">您可以从函数返回的一种数据是另一种函数。</font><font style="vertical-align: inherit;">返回该新函数时，创建该函数的函数中使用的所有变量和参数都不会消失。</font><font style="vertical-align: inherit;">而是，该父函数“关闭”。</font><font style="vertical-align: inherit;">换句话说，除了返回的功能外，什么都看不到它，也看不到它使用的变量。</font><font style="vertical-align: inherit;">该新函数具有特殊的功能，可以回顾创建它的函数内部并查看其中的数据。</font></font></p>

<pre class="lang-js prettyprint prettyprinted" style=""><code><span class="kwd">function</span><span class="pln"> the_closure</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">;</span><span class="pln"> </span><span class="com">// Here, we look back inside the_closure for the value of x</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> myFn </span><span class="pun">=</span><span class="pln"> the_closure</span><span class="pun">();</span><span class="pln">
myFn</span><span class="pun">();</span><span class="pln"> </span><span class="com">//=&gt; 4</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解释它的另一种非常简单的方法是在范围上：</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每当您在较大范围内创建较小范围时，较小范围将始终能够看到较大范围中的内容。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">阿飞小卤蛋</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我不明白为什么答案在这里这么复杂。</font></font></strong></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个闭包：</font></font></p>

<pre class="lang-js prettyprint prettyprinted" style=""><code><span class="kwd">var</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">42</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">function</span><span class="pln"> b</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> a</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是。</font><font style="vertical-align: inherit;">您可能一天使用多次。</font></font></p>

<p><br></p>

<blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有理由相信闭包是解决特定问题的复杂设计方法。</font><font style="vertical-align: inherit;">不，</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从函数声明的位置（不运行）的角度来看</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，闭包只是使用来自更高范围的变量</font><font style="vertical-align: inherit;">。</font></font></p>
  
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，它</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您执行的操作会更加壮观，请参阅其他答案。</font></font></p>
</blockquote></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">StafanHarry</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dlaliberte第一点的示例：</font></font></p>

<blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闭包不仅在您返回内部函数时创建。</font><font style="vertical-align: inherit;">实际上，封闭函数根本不需要返回。</font><font style="vertical-align: inherit;">您可以改为将内部函数分配给外部作用域中的变量，或将其作为参数传递给可以立即使用的另一个函数。</font><font style="vertical-align: inherit;">因此，在调用封闭函数时，封闭函数的关闭可能已经存在，因为任何内部函数都可以在调用它后立即对其进行访问。</font></font></p>
</blockquote>

<pre class="lang-js prettyprint prettyprinted" style=""><code><span class="kwd">var</span><span class="pln"> i</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">function</span><span class="pln"> foo</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">
    i </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> y </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(++</span><span class="pln">tmp</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
foo</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span><span class="pln">
i</span><span class="pun">(</span><span class="lit">3</span><span class="pun">);</span></code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神奇神奇Near</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我知道已经有很多解决方案，但是我猜想这个小而简单的脚本可以用来说明这个概念：</font></font></p>

<pre class="lang-js prettyprint prettyprinted" style=""><code><span class="com">// makeSequencer will return a "sequencer" function</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> makeSequencer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> _count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">// not accessible outside this function</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> sequencer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> _count</span><span class="pun">++;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> sequencer</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> fnext </span><span class="pun">=</span><span class="pln"> makeSequencer</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> v0 </span><span class="pun">=</span><span class="pln"> fnext</span><span class="pun">();</span><span class="pln">     </span><span class="com">// v0 = 0;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> v1 </span><span class="pun">=</span><span class="pln"> fnext</span><span class="pun">();</span><span class="pln">     </span><span class="com">// v1 = 1;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> vz </span><span class="pun">=</span><span class="pln"> fnext</span><span class="pun">.</span><span class="pln">_count </span><span class="com">// vz = undefined</span></code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">NearSamHarry</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闭包是内部函数可以访问其外部函数中的变量的地方。</font><font style="vertical-align: inherit;">这可能是闭包最简单的单行解释。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">猪猪卡卡西西里</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我如何向六岁的孩子解释：</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您知道大人如何拥有房屋，他们称之为房屋吗？</font><font style="vertical-align: inherit;">当妈妈有孩子时，孩子实际上并不拥有任何东西，对吗？</font><font style="vertical-align: inherit;">但是它的父母拥有一所房子，因此只要有人问孩子“你的房子在哪里？”，他/她就可以回答“那所房子！”，并指向其父母的房子。</font><font style="vertical-align: inherit;">“关闭”是孩子始终（即使在国外）能够说出自己有房屋的能力，即使实际上这是父母的财产。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">乐猪猪</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前一段时间，我写了一篇博客文章解释了闭包。</font><font style="vertical-align: inherit;">这就是我说的关于闭包的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原因</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><strong><font style="vertical-align: inherit;">因为</font></strong><font style="vertical-align: inherit;">您想要一个</font><font style="vertical-align: inherit;">闭包</font><font style="vertical-align: inherit;">。</font></font></p>

<blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闭包是一种使函数具有</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">永久性私有变量的</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法，也就是说，只有一个函数才知道的变量，它可以在其中跟踪以前运行时的信息。</font></font></p>
</blockquote>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从这种意义上讲，它们使函数的行为有点像具有私有属性的对象。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文：</font></font></p>

<p><a href="http://sleeplessgeek.blogspot.com/2009/12/so-what-are-these-closure-thingys.html" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那么这些关闭的东西是什么呢？</font></font></a></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">LEY神乐</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闭包很难解释，因为闭包用于使某些行为正常工作，每个人都希望它们能正常工作。</font><font style="vertical-align: inherit;">我发现解释它们的最佳方法（以及</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解它们</font><font style="vertical-align: inherit;">的方法</font><font style="vertical-align: inherit;">）是想象没有它们的情况：</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint prettyprinted" style=""><code><span class="pln">    </span><span class="kwd">var</span><span class="pln"> bind </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> y</span><span class="pun">;</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    
    </span><span class="kwd">var</span><span class="pln"> plus5 </span><span class="pun">=</span><span class="pln"> bind</span><span class="pun">(</span><span class="lit">5</span><span class="pun">);</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">plus5</span><span class="pun">(</span><span class="lit">3</span><span class="pun">));</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 运行代码段</font></font></span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开摘要</font></font></a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif14" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果JavaScript </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知道闭包，</font><font style="vertical-align: inherit;">在这里会发生什么</font><font style="vertical-align: inherit;">？</font><font style="vertical-align: inherit;">只需将最后一行的调用替换为其方法主体（基本上是函数调用所做的工作），您将获得：</font></font></p>

<pre class="lang-js prettyprint prettyprinted" style=""><code><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">);</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，的定义在</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哪里？</font><font style="vertical-align: inherit;">我们没有在当前范围内对其进行定义。</font><font style="vertical-align: inherit;">唯一的解决方案是</font></font><code>plus5</code> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随身携带</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其范围（或更确切地说，其父级的范围）。</font><font style="vertical-align: inherit;">这种方式</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义明确，并绑定到值5。</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">ItachiHarry</span><span class="discuss-time">2020/03/09 11:50:36</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">好吧，6岁的瓶盖粉丝。</font><font style="vertical-align: inherit;">您是否想听到最简单的闭包示例？</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们想象下一个情况：驾驶员坐在汽车上。</font><font style="vertical-align: inherit;">那辆车在飞机上。</font><font style="vertical-align: inherit;">飞机在机场。</font><font style="vertical-align: inherit;">驾驶员即使在飞机离开机场后也无法进入汽车外部但在飞机内部的东西，这是封闭的。</font><font style="vertical-align: inherit;">而已。</font><font style="vertical-align: inherit;">27岁时，请查看</font></font><a href="https://stackoverflow.com/a/111200/1393791"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更详细的说明</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或以下示例。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是将飞机上的故事转换为代码的方法。</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint prettyprinted" style=""><code><span class="kwd">var</span><span class="pln"> plane </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">defaultAirport</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">var</span><span class="pln"> lastAirportLeft </span><span class="pun">=</span><span class="pln"> defaultAirport</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">var</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    driver</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      startAccessPlaneInfo</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        setInterval</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"Last airport was "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> lastAirportLeft</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">},</span><span class="pln"> </span><span class="lit">2000</span><span class="pun">);</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">
  car</span><span class="pun">.</span><span class="pln">driver</span><span class="pun">.</span><span class="pln">startAccessPlaneInfo</span><span class="pun">();</span><span class="pln">

  </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    leaveTheAirport</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">airPortName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      lastAirportLeft </span><span class="pun">=</span><span class="pln"> airPortName</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}(</span><span class="str">"Boryspil International Airport"</span><span class="pun">);</span><span class="pln">

plane</span><span class="pun">.</span><span class="pln">leaveTheAirport</span><span class="pun">(</span><span class="str">"John F. Kennedy"</span><span class="pun">);</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 运行代码段</font></font></span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开摘要</font></font></a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif17" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit" frameborder="0"></iframe></div></div></div>
</div>
<p></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神无宝儿</span><span class="discuss-time">2020/03/09 11:50:35</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript中的每个函数都维护与其外部词法环境的链接。</font><font style="vertical-align: inherit;">词汇环境是作用域中所有名称（例如变量，参数）及其值的映射。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，每当您看到</font></font><code>function</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字时，该函数内部的代码都可以访问该函数外部声明的变量。</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint prettyprinted" style=""><code><span class="kwd">function</span><span class="pln"> foo</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">function</span><span class="pln"> bar</span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> y </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(++</span><span class="pln">tmp</span><span class="pun">));</span><span class="pln"> </span><span class="com">// will log 16</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  bar</span><span class="pun">(</span><span class="lit">10</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

foo</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 运行代码段</font></font></span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开摘要</font></font></a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif8" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将记录下来</font></font><code>16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为函数</font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭了参数</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和变量</font></font><code>tmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，两者都存在于外部函数的词法环境中</font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Function </font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及其与函数的词法环境的链接</font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个闭包。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个函数不必</font><font style="vertical-align: inherit;">为了创建一个闭包</font><font style="vertical-align: inherit;">而</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">仅仅凭借其声明，每个函数都会在其封闭的词法环境中关闭，从而形成一个闭合。</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint prettyprinted" style=""><code><span class="kwd">function</span><span class="pln"> foo</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> y </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(++</span><span class="pln">tmp</span><span class="pun">));</span><span class="pln"> </span><span class="com">// will also log 16</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> bar </span><span class="pun">=</span><span class="pln"> foo</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span><span class="pln">
bar</span><span class="pun">(</span><span class="lit">10</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 16</span><span class="pln">
bar</span><span class="pun">(</span><span class="lit">10</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 17</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 运行代码段</font></font></span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开摘要</font></font></a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif9" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的函数也会记录16，因为里面的代码</font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仍然可以引用参数</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和变量</font></font><code>tmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即使它们不再直接在范围内。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，由于</font></font><code>tmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仍在内部</font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的封闭中</font><font style="vertical-align: inherit;">徘徊</font><font style="vertical-align: inherit;">，因此可以对其进行递增。</font><font style="vertical-align: inherit;">每次调用时，它都会增加</font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭的最简单示例是：</font></font></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint prettyprinted" style=""><code><span class="kwd">var</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">function</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">a</span><span class="pun">);</span><span class="pln"> </span><span class="com">// will output 10</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">b</span><span class="pun">);</span><span class="pln"> </span><span class="com">// will output 6</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span><span class="pln">
test</span><span class="pun">();</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 运行代码段</font></font></span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开摘要</font></font></a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif10" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p>When a JavaScript function is invoked, a new execution context <code>ec</code> is created. Together with the function arguments and the target object, this execution context also receives a link to the lexical environment of the calling execution context, meaning the variables declared in the outer lexical environment (in the above example, both <code>a</code> and <code>b</code>) are available from <code>ec</code>.</p>

<p>Every function creates a closure, because every function has a link to its outer lexical environment. </p>

<p>Note that variables <em>themselves</em> are visible from within a closure, <em>not</em> copies.</p></div><!----></div></div><!--]--></div></div></div><div class="c-block-comment"><script>window.blockCommentOptions = {
    root: &#39;discuss-wrapper&#39;,
    lang: &#39;zh_Hans_CN&#39;,
    locale: {&quot;discussTip&quot;:&quot;您的回答将提交至区块链中，开启Web3的大门。&quot;,&quot;discussInputTitle&quot;:&quot;回答&quot;,&quot;discussInputCommentPlaceholder&quot;:&quot;请输入回答...&quot;,&quot;discussInputCommentTip&quot;:&quot;请输入回答&quot;,&quot;discussSubmitting&quot;:&quot;您的回答正提交至区块链中...&quot;,&quot;totalTitle&quot;:&quot;共[num]条回答&quot;},
  };</script><script async src="/assets/js/block-comment.js"></script></div></div><div class="c-aside"><div class="fixed-area"><div class="question-list"><p class="title">最新问答</p><div class="body"><!--[--><div class="a-list-item"><a href="/question/4376" class=""><div class="inner-item"><!----><span class="flex-1">HTML5 Drag &amp; Drop 拖动时更改图标/光标</span></div><div class="text-12 text-theme mt-4">5 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4375" class=""><div class="inner-item"><!----><span class="flex-1">如何完全卸载 Node.js，然后从头重新安装 (Mac OS X)</span></div><div class="text-12 text-theme mt-4">25 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4342" class=""><div class="inner-item"><!----><span class="flex-1">MAC终端删除代理有效命令</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4338" class=""><div class="inner-item"><!----><span class="flex-1">vue动态路由跳转同一地址不刷新页面</span></div><div class="text-12 text-theme mt-4">0 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4336" class=""><div class="inner-item"><!----><span class="flex-1">NUXT引入tailwindcss报错Error: Expected an opening square bracket.</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><!--]--></div></div><div class="c-adsense side-adsense"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-9684175232031230" data-ad-slot="2002754568" data-ad-format="auto" data-full-width-responsive="true"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div></div><!--]--></main><div class="c-footer"><div class="common-footer-inner"><div class="logo-contract"><a href="/" class="inline-flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-50" src="/logo.svg"></a><div class="contacts"><!--[--><a class="contact-item" href="mailto:yldiswinter@gmail.com"><i class="iconfont icon-youxiang"></i></a><a class="contact-item" href="https://github.com/WinterMain"><i class="iconfont icon-github"></i></a><!--]--></div></div><div class="nav-area"><div class="pr-20"><p class="label"><span class="z-1">导航</span></p></div><div class="nav-items"><!--[--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div></div><div class="donate-area"><div class="pr-20"><p class="label"><span class="z-1">打赏</span></p></div><div class="donate-list"><!--[--><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/btc.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">BTC</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2</span></p></div></div><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/eth.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">ETH</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">0xff6FC30033269845d196cB48F6a0660598D218D8</span></p></div></div><!--]--></div></div><div class="flex-1 ml-20 flex justify-end xs:hidden"><div class="c-adsense mt-0"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;width:180px;height:180px" data-ad-client="ca-pub-9684175232031230" data-ad-slot="6637798878"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div><!--v-if--><!--]--></section><!--]--></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr id="__NUXT_DATA__" data-src="/question/164/_payload.json?ed1c41d3-4e7d-4d6a-b681-7520700beb9e">[{"state":1,"once":7,"_errors":8,"serverRendered":10,"path":11,"pinia":12,"prerenderedAt":43},["Reactive",2],{"$ssite-config":3},{"env":4,"name":5,"url":6},"production","Winter 100分","https://winter100.com/",["Set"],["ShallowReactive",9],{},true,"/question/164",["Reactive",13],{"lang":14,"main":27},{"langOptions":15,"lang":17,"defaultLang":17},[16,20,23],{"val":17,"text":18,"icon":19},"zh_Hans_CN","简体中文","/images/cn.svg",{"val":21,"text":22,"icon":19},"zh_Hant_HK","繁体中文",{"val":24,"text":25,"icon":26},"en_US","English","/images/en.svg",{"category":28,"nav":29,"likes":30,"donateCoins":31},"browserplugin","all",[],[32,36,40],{"coin":33,"address":34,"icon":35},"BTC","1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2","/images/btc.png",{"coin":37,"address":38,"icon":39},"ETH","0xff6FC30033269845d196cB48F6a0660598D218D8","/images/eth.png",{"coin":41,"address":38,"icon":42},"CET","/images/cet.png",1729398472735]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{MODE:"",NODE_ENV:"production",NAME:"winter100"},app:{baseURL:"/",buildId:"ed1c41d3-4e7d-4d6a-b681-7520700beb9e",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>