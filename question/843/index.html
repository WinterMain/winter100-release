<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>如何访问.then（）链中的先前的诺言结果？ - Winter100</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KZ1S1HBYLX"></script>
<link rel="stylesheet" type="text/css" href="/iconfont/iconfont.css?t=20240930">
<link rel="stylesheet" href="/_nuxt/entry.DrNe-4ui.css">
<link rel="stylesheet" href="/_nuxt/default.IGDD3AF_.css">
<link rel="stylesheet" href="/_nuxt/el-popper.K902zei-.css">
<link rel="stylesheet" href="/_nuxt/Donate.C61dBJSg.css">
<link rel="stylesheet" href="/_nuxt/Adsense.C3XXM3TO.css">
<link rel="stylesheet" href="/_nuxt/Main.DNckYZCw.css">
<link rel="stylesheet" href="/_nuxt/Discuss.DCbqPIzI.css">
<link rel="stylesheet" href="/_nuxt/NewList.B56uyASM.css">
<link rel="stylesheet" href="/_nuxt/useLoadImages.BFkK1imR.css">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/question/843/_payload.json?a4e7ffa4-1106-4b54-8c76-c28eedce6141">
<script src="/_nuxt/xuoSwgeJ-legacy.js" nomodule crossorigin></script>
<script src="/_nuxt/BUrHG7Hw-legacy.js" nomodule crossorigin></script>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-KZ1S1HBYLX');
</script>
<meta property="og:title" content="如何访问.then（）链中的先前的诺言结果？ - Winter100">
<meta name="description" content="我已经将我的代码重组为promises，并建立了一个精彩的长期承诺链，其中包含多个.then()回调。最后，我想返回一些复合值，并且需要访问多个中间pro...">
<meta property="og:description" content="我已经将我的代码重组为promises，并建立了一个精彩的长期承诺链，其中包含多个.then()回调。最后，我想返回一些复合值，并且需要访问多个中间pro...">
<meta property="og:image" content>
<meta name="twitter:card" content="summary_large_image">
<script type="module" src="/_nuxt/BvB2M4kZ.js" crossorigin></script></head><body><div id="el-popper-container-1024"><!--teleport start anchor--><!--[--><div style="z-index:2001;position:absolute;left:0;top:0;width:120px;display:none;" class="el-popper is-light el-popover c-lang-legal-popover" tabindex="-1" aria-hidden="true"><!--[--><!--[--><!--[--><!--[--><!--v-if--><!--[--><div class="c-lang-legal-box"><div class="c-contain"><ul class="c-list"><!--[--><li class="item-list list-item-active"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">简体中文</div></li><li class="item-list false"><img src="/images/cn.svg" class="mr-12"><div class="flex-shrink-0">繁体中文</div></li><li class="item-list false"><img src="/images/en.svg" class="mr-12"><div class="flex-shrink-0">English</div></li><!--]--></ul></div></div><!--]--><!--]--><span class="el-popper__arrow" style="position:absolute;" data-popper-arrow></span><!--]--><!--]--><!--]--></div><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--><!--teleport start anchor--><!--[--><!--v-if--><!--]--><!--teleport anchor--></div><div id="__nuxt"><!--[--><section class="el-container is-vertical l-home"><!--[--><div class="nuxt-loading-indicator" style="position:fixed;top:0;right:0;left:0;pointer-events:none;width:auto;height:3px;opacity:0;background:repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%);background-size:Infinity% auto;transform:scaleX(0%);transform-origin:left;transition:transform 0.1s, height 0.4s, opacity 0.4s;z-index:999999;"></div><!--[--><!----><!--]--><!--[--><!----><!--]--><div class="c-common-header"><header class="el-header c-common-header-inner" style=""><!--[--><a href="/" class="flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-40" src="/logo.svg"></a><div class="nav-items"><!--[--><!--[--><a href="/" class="nav-item">首页</a><!--]--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/about" class="nav-item">关于</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div><div class="flex-1"></div><div class="c-lang-legal xs:hidden"><!--[--><span class="relative ml-32 inline-flex items-center cursor-pointer border-gray-06 border px-8 py-4 rounded-8 el-tooltip__trigger el-tooltip__trigger"><img src="/images/cn.svg" class="mr-8"> 简体中文 <i class="el-icon ml-4 text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="m192 384 320 384 320-384z"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><i class="iconfont icon-caidan text-theme hover:opacity-70 text-28 hidden xs:block"></i><!--]--></header><!----></div><main class="l-default-home"><!--[--><div class="c-question-main"><div class="page-container pt-30 pb-60"><div class="c-outer"><div class="article-area"><h1 class="article-title">如何访问.then（）链中的先前的诺言结果？</h1><p class="article-meta" style="color:#8590a6;"><i class="iconfont icon-time text-12"></i><span>小胖Green</span><span>发布于2020/03/11 20:27:14</span></p><div class="article-content code-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我已经将我的代码重组为</font></font><a href="https://en.wikipedia.org/wiki/Futures_and_promises"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">promises</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并建立了一个精彩的长期</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承诺链</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中包含多个</font></font><code>.then()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回调。</font><font style="vertical-align: inherit;">最后，我想返回一些复合值，并且需要访问多个</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中间promise结果</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，序列中间的分辨率值不在上次回调的范围内，如何访问它们？</font></font></p>

<pre><code>function getExample() {<font></font>
    return promiseA(…).then(function(resultA) {<font></font>
        // Some processing<font></font>
        return promiseB(…);<font></font>
    }).then(function(resultB) {<font></font>
        // More processing<font></font>
        return // How do I gain access to resultA here?<font></font>
    });<font></font>
}<font></font>
</code></pre></div></div><div class="mt-20"><div class="discuss-wrapper"><div class="discuss-list"><!--[--><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">逆天前端</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><pre><code>function getExample() {<font></font>
    var retA, retB;<font></font>
    return promiseA(…).then(function(resultA) {<font></font>
        retA = resultA;<font></font>
        // Some processing<font></font>
        return promiseB(…);<font></font>
    }).then(function(resultB) {<font></font>
        // More processing<font></font>
        //retA is value of promiseA<font></font>
        return // How do I gain access to resultA here?<font></font>
    });<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单的方法：D</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">樱Eva</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用bluebird时，可以使用</font></font><code>.bind</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法在promise链***享变量：</font></font></p>

<pre><code>somethingAsync().bind({})<font></font>
.spread(function (aValue, bValue) {<font></font>
    this.aValue = aValue;<font></font>
    this.bValue = bValue;<font></font>
    return somethingElseAsync(aValue, bValue);<font></font>
})<font></font>
.then(function (cValue) {<font></font>
    return this.aValue + this.bValue + cValue;<font></font>
});<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请检查此链接以获取更多信息：</font></font></p>

<p><a href="http://bluebirdjs.com/docs/api/promise.bind.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://bluebirdjs.com/docs/api/promise.bind.html</font></font></a></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神无村村</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个答案，使用</font></font><code>babel-node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本&lt;6</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 </font></font><code>async - await</code> </p>

<p><code>npm install -g babel@5.6.14</code></p>

<p><code>example.js:</code></p>

<pre><code>async function getExample(){<font></font>
<font></font>
  let response = await returnPromise();<font></font>
<font></font>
  let response2 = await returnPromise2();<font></font>
<font></font>
  console.log(response, response2)<font></font>
<font></font>
}<font></font>
<font></font>
getExample()<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，运行</font></font><code>babel-node example.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并瞧！</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神无村村</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我不会在自己的代码中使用此模式，因为我不太喜欢使用全局变量。</font><font style="vertical-align: inherit;">但是，在紧急情况下它将起作用。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户是一个承诺的猫鼬模型。</font></font></p>

<pre><code>var globalVar = '';<font></font>
<font></font>
User.findAsync({}).then(function(users){<font></font>
  globalVar = users;<font></font>
}).then(function(){<font></font>
  console.log(globalVar);<font></font>
});<font></font>
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">神无村村</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点7.4现在支持带有和声标志的异步/等待调用。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试这个： </font></font></p>

<pre><code>async function getExample(){<font></font>
<font></font>
  let response = await returnPromise();<font></font>
<font></font>
  let response2 = await returnPromise2();<font></font>
<font></font>
  console.log(response, response2)<font></font>
<font></font>
}<font></font>
<font></font>
getExample()<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并使用以下命令运行文件：</font></font></p>

<p><code>node --harmony-async-await getExample.js</code></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以简单！</font></font></p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">Eva理查德</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌套（和）闭包</font></font></h1>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用闭包来维护变量的范围（在我们的示例中为成功回调函数参数）是自然的JavaScript解决方案。</font><font style="vertical-align: inherit;">使用promise，我们可以任意</font></font><a href="https://stackoverflow.com/a/22000931/1048572"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌套和展平</font></font></a> <code>.then()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回调，它们在语义上是等效的，但内部回调的范围除外。</font></font></p>

<pre><code>function getExample() {<font></font>
    return promiseA(…).then(function(resultA) {<font></font>
        // some processing<font></font>
        return promiseB(…).then(function(resultB) {<font></font>
            // more processing<font></font>
            return // something using both resultA and resultB;<font></font>
        });<font></font>
    });<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，这是在构建压痕金字塔。</font><font style="vertical-align: inherit;">如果缩进变得太大，您仍然可以使用旧工具来反击</font></font><a href="http://callbackhell.com/" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厄运</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><a href="http://callbackhell.com/" rel="noreferrer"><font style="vertical-align: inherit;">金字塔</font></a><font style="vertical-align: inherit;">：模块化，使用额外的命名函数以及在不再需要变量时立即平整承诺链。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从理论上讲，您总是可以避免两个以上的嵌套级别（通过使所有闭包都明确），实际上可以使用尽可能多的嵌套。</font></font></p>

<pre><code>function getExample() {<font></font>
    // preprocessing<font></font>
    return promiseA(…).then(makeAhandler(…));<font></font>
}<font></font>
function makeAhandler(…)<font></font>
    return function(resultA) {<font></font>
        // some processing<font></font>
        return promiseB(…).then(makeBhandler(resultA, …));<font></font>
    };<font></font>
}<font></font>
function makeBhandler(resultA, …) {<font></font>
    return function(resultB) {<font></font>
        // more processing<font></font>
        return // anything that uses the variables in scope<font></font>
    };<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以使用辅助功能对于这种</font></font><a href="https://en.wikipedia.org/wiki/Partial_application" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">局部的应用</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如</font></font><code>_.partial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><a href="http://underscorejs.org/#partial" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下划线</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><a href="https://lodash.com/docs#partial" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lodash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地</font></font><code>.bind()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以进一步降低缩进：</font></font></p>

<pre><code>function getExample() {<font></font>
    // preprocessing<font></font>
    return promiseA(…).then(handlerA);<font></font>
}<font></font>
function handlerA(resultA) {<font></font>
    // some processing<font></font>
    return promiseB(…).then(handlerB.bind(null, resultA));<font></font>
}<font></font>
function handlerB(resultA, resultB) {<font></font>
    // more processing<font></font>
    return // anything that uses resultA and resultB<font></font>
}<font></font>
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">A小卤蛋Pro</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对“可变上下文状态”的苛刻要求较低</font></font></h1>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用本地范围的对象来收集承诺链中的中间结果是解决您提出的问题的一种合理方法。</font><font style="vertical-align: inherit;">考虑以下代码段：</font></font></p>

<pre><code>function getExample(){<font></font>
    //locally scoped<font></font>
    const results = {};<font></font>
    return promiseA(paramsA).then(function(resultA){<font></font>
        results.a = resultA;<font></font>
        return promiseB(paramsB);<font></font>
    }).then(function(resultB){<font></font>
        results.b = resultB;<font></font>
        return promiseC(paramsC);<font></font>
    }).then(function(resultC){<font></font>
        //Resolve with composite of all promises<font></font>
        return Promise.resolve(results.a + results.b + resultC);<font></font>
    }).catch(function(error){<font></font>
        return Promise.reject(error);<font></font>
    });<font></font>
}<font></font>
</code></pre>

<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局变量是错误的，因此此解决方案使用局部范围的变量，不会造成损害。</font><font style="vertical-align: inherit;">它只能在函数中访问。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可变状态是丑陋的，但这不会以丑陋的方式改变状态。</font><font style="vertical-align: inherit;">丑陋的可变状态传统上是指修改函数自变量或全局变量的状态，但是此方法仅修改了局部范围的变量的状态，该变量的存在仅出于汇总promise结果的目的……一个将死于简单死亡的变量一旦诺言解决。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会阻止中间承诺访问结果对象的状态，但这不会引入某些可怕的情况，在这种情况下，链中的一个承诺会流氓并破坏您的结果。</font><font style="vertical-align: inherit;">在promise的每个步骤中设置值的责任仅限于此功能，并且总体结果将是正确的还是不正确的...它将不会是会在生产后多年出现的一些错误（除非您打算这样做） ！）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这不会引入由并行调用引起的竞争条件场景，因为将为getExample函数的每次调用创建一个结果变量的新实例。  </font></font></li>
</ul></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">泡芙村村Pro</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECMAScript和声</font></font></h1>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，语言设计者也意识到了这个问题。</font><font style="vertical-align: inherit;">他们做了很多工作，</font></font><a href="http://tc39.github.io/ecmascript-asyncawait/" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">异步函数提案</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最终使它成为了</font></font></p>

<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECMAScript 8</font></font></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您不再需要单个</font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用或回调函数，因为在异步函数（被调用时返回一个Promise）中，您只需等待Promise直接解析即可。</font><font style="vertical-align: inherit;">它还具有诸如条件，循环和try-catch-clauses之类的任意控制结构，但是为了方便起见，我们在这里不需要它们：</font></font></p>

<pre><code>async function getExample() {<font></font>
    var resultA = await promiseA(…);<font></font>
    // some processing<font></font>
    var resultB = await promiseB(…);<font></font>
    // more processing<font></font>
    return // something using both resultA and resultB<font></font>
}<font></font>
</code></pre>

<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECMAScript 6</font></font></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在等待ES8时，我们已经使用了非常相似的语法。</font><font style="vertical-align: inherit;">ES6带有</font></font><a href="http://davidwalsh.name/es6-generators" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成器功能</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font><a href="http://davidwalsh.name/es6-generators" rel="noreferrer"><font style="vertical-align: inherit;">功能</font></a><font style="vertical-align: inherit;">允许按任意放置的</font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">将执行分段</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些切片可以相互独立，甚至异步地运行-这就是我们要在执行下一步之前等待promise解析时所要做的。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有专用的库（例如</font></font><a href="https://github.com/tj/co" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">co</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="http://taskjs.org/" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">task.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），但是还有许多</font><a href="http://taskjs.org/" rel="noreferrer"><font style="vertical-align: inherit;">Promise</font></a><font style="vertical-align: inherit;">库具有辅助函数（</font></font><a href="https://github.com/kriskowal/q/wiki/API-Reference#generators" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="http://bluebirdjs.com/docs/api/generators.html" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluebird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://github.com/cujojs/when/blob/master/docs/api.md#es6-generators" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> …），</font><font style="vertical-align: inherit;">当您为它们提供生成器函数时，它们会为您</font></font><a href="https://stackoverflow.com/a/23554399/1048572"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逐步异步执行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">产生希望。</font></font></p>

<pre><code>var getExample = Promise.coroutine(function* () {<font></font>
//               ^^^^^^^^^^^^^^^^^ Bluebird syntax<font></font>
    var resultA = yield promiseA(…);<font></font>
    // some processing<font></font>
    var resultB = yield promiseB(…);<font></font>
    // more processing<font></font>
    return // something using both resultA and resultB<font></font>
});<font></font>
</code></pre>

<p>This did work in Node.js since version 4.0, also a few browsers (or their dev editions) did support generator syntax relatively early.</p>

<h2>ECMAScript 5</h2>

<p>However, if you want/need to be backwards-compatible you cannot use those without a transpiler. Both generator functions and async functions are supported by the current tooling, see for example the documentation of Babel on <a href="http://babeljs.io/learn-es2015/#ecmascript-2015-features-generators" rel="noreferrer">generators</a> and <a href="http://babeljs.io/docs/plugins/syntax-async-functions" rel="noreferrer">async functions</a>.</p>

<p>And then, there are also many other <a href="https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS#synchronous-to-asynchronous-javascript-compilers-cps" rel="noreferrer">compile-to-JS languages</a>
that are dedicated to easing asynchronous programming. They usually use a syntax similar to <code>await</code>, (e.g. <a href="http://maxtaco.github.io/coffee-script/" rel="noreferrer">Iced CoffeeScript</a>), but there are also others that feature a Haskell-like <code>do</code>-notation (e.g. <a href="http://lattejs.com/" rel="noreferrer">LatteJs</a>, <a href="https://www.npmjs.com/package/monadic" rel="noreferrer">monadic</a>, <a href="http://www.purescript.org/" rel="noreferrer">PureScript</a> or <a href="http://lispyscript.com/" rel="noreferrer">LispyScript</a>).</p></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">老丝猿阿飞</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同步检查</font></font></h1>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为变量分配可满足的承诺值，然后通过同步检查获取其值。</font><font style="vertical-align: inherit;">该示例使用bluebird的</font></font><code>.value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法，但是许多库提供了类似的方法。</font></font></p>

<pre><code>function getExample() {<font></font>
    var a = promiseA(…);<font></font>
<font></font>
    return a.then(function() {<font></font>
        // some processing<font></font>
        return promiseB(…);<font></font>
    }).then(function(resultB) {<font></font>
        // a is guaranteed to be fulfilled here so we can just retrieve its<font></font>
        // value synchronously<font></font>
        var aValue = a.value();<font></font>
    });<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以将其用于任意多个值：</font></font></p>

<pre><code>function getExample() {<font></font>
    var a = promiseA(…);<font></font>
<font></font>
    var b = a.then(function() {<font></font>
        return promiseB(…)<font></font>
    });<font></font>
<font></font>
    var c = b.then(function() {<font></font>
        return promiseC(…);<font></font>
    });<font></font>
<font></font>
    var d = c.then(function() {<font></font>
        return promiseD(…);<font></font>
    });<font></font>
<font></font>
    return d.then(function() {<font></font>
        return a.value() + b.value() + c.value() + d.value();<font></font>
    });<font></font>
}<font></font>
</code></pre></div><!----></div></div><div class="discuss-item"><div class="discuss-parent"><div class="discuss-meta"><span class="discuss-user">泡芙村村Pro</span><span class="discuss-time">2020/03/11 20:27:14</span></div><div class="discuss-comment"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式传递</font></font></h1>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与嵌套回调类似，此技术依赖于闭包。</font><font style="vertical-align: inherit;">但是，链条保持不变-不仅传递最新结果，而且每个步骤都传递一些状态对象。</font><font style="vertical-align: inherit;">这些状态对象会累积先前操作的结果，并传回以后将再次需要的所有值以及当前任务的结果。</font></font></p>

<pre><code>function getExample() {<font></font>
    return promiseA(…).then(function(resultA) {<font></font>
        // some processing<font></font>
        return promiseB(…).then(b =&gt; [resultA, b]); // function(b) { return [resultA, b] }<font></font>
    }).then(function([resultA, resultB]) {<font></font>
        // more processing<font></font>
        return // something using both resultA and resultB<font></font>
    });<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，那个小箭头</font></font><code>b =&gt; [resultA, b]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是关闭函数，</font></font><code>resultA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将两个结果的数组传递给下一步</font><font style="vertical-align: inherit;">的函数</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它使用参数解构语法将其再次分解为单个变量。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在ES6进行解构之前</font></font><code>.spread()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，许多Promise库（</font></font><a href="https://github.com/kriskowal/q/wiki/API-Reference#promisespreadonfulfilled-onrejected" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="http://bluebirdjs.com/docs/api/spread.html" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluebird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://github.com/cujojs/when/blob/master/docs/api.md#promisespread" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，…）</font><font style="vertical-align: inherit;">提供了</font><font style="vertical-align: inherit;">一种称为nifty的辅助方法</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它需要一个具有多个参数的函数-每个数组元素一个-用作</font></font><code>.spread(function(resultA, resultB) { …</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，这里所需的关闭可以通过一些辅助功能进一步简化，例如</font></font></p>

<pre><code>function addTo(x) {<font></font>
    // imagine complex `arguments` fiddling or anything that helps usability<font></font>
    // but you get the idea with this simple one:<font></font>
    return res =&gt; [x, res];<font></font>
}<font></font>
<font></font>
…<font></font>
return promiseB(…).then(addTo(resultA));<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另外，您可以雇用</font></font><code>Promise.all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为数组产生promise：</font></font></p>

<pre><code>function getExample() {<font></font>
    return promiseA(…).then(function(resultA) {<font></font>
        // some processing<font></font>
        return Promise.all([resultA, promiseB(…)]); // resultA will implicitly be wrapped<font></font>
                                                    // as if passed to Promise.resolve()<font></font>
    }).then(function([resultA, resultB]) {<font></font>
        // more processing<font></font>
        return // something using both resultA and resultB<font></font>
    });<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而且，您不仅可以使用数组，还可以使用任意复杂的对象。</font><font style="vertical-align: inherit;">例如，使用</font></font><a href="http://underscorejs.org/#extend" rel="noreferrer"><code>_.extend</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noreferrer"><code>Object.assign</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其他辅助函数中：</font></font></p>

<pre><code>function augment(obj, name) {<font></font>
    return function (res) { var r = Object.assign({}, obj); r[name] = res; return r; };<font></font>
}<font></font>
<font></font>
function getExample() {<font></font>
    return promiseA(…).then(function(resultA) {<font></font>
        // some processing<font></font>
        return promiseB(…).then(augment({resultA}, "resultB"));<font></font>
    }).then(function(obj) {<font></font>
        // more processing<font></font>
        return // something using both obj.resultA and obj.resultB<font></font>
    });<font></font>
}<font></font>
</code></pre>

<p>While this pattern guarantees a flat chain and explicit state objects can improve clarity, it will become tedious for a long chain. Especially when you need the state only sporadically, you still have to pass it through every step. With this fixed interface, the single callbacks in the chain are rather tightly coupled and inflexible to change. It makes factoring out single steps harder, and callbacks cannot be supplied directly from other modules - they always need to be wrapped in boilerplate code that cares about the state. Abstract helper functions like the above can ease the pain a bit, but it will always be present.</p></div><!----></div></div><!--]--></div></div></div><div class="c-block-comment"><script>window.blockCommentOptions = {
    root: &#39;discuss-wrapper&#39;,
    lang: &#39;zh_Hans_CN&#39;,
    locale: {&quot;discussTip&quot;:&quot;您的回答将提交至区块链中，开启Web3的大门。&quot;,&quot;discussInputTitle&quot;:&quot;回答&quot;,&quot;discussInputCommentPlaceholder&quot;:&quot;请输入回答...&quot;,&quot;discussInputCommentTip&quot;:&quot;请输入回答&quot;,&quot;discussSubmitting&quot;:&quot;您的回答正提交至区块链中...&quot;,&quot;totalTitle&quot;:&quot;共[num]条回答&quot;},
  };</script><script async src="/assets/js/block-comment.js"></script></div></div><div class="c-aside"><div class="fixed-area"><div class="question-list"><p class="title">最新问答</p><div class="body"><!--[--><div class="a-list-item"><a href="/question/4376" class=""><div class="inner-item"><!----><span class="flex-1">HTML5 Drag &amp; Drop 拖动时更改图标/光标</span></div><div class="text-12 text-theme mt-4">5 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4375" class=""><div class="inner-item"><!----><span class="flex-1">如何完全卸载 Node.js，然后从头重新安装 (Mac OS X)</span></div><div class="text-12 text-theme mt-4">25 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4342" class=""><div class="inner-item"><!----><span class="flex-1">MAC终端删除代理有效命令</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4338" class=""><div class="inner-item"><!----><span class="flex-1">vue动态路由跳转同一地址不刷新页面</span></div><div class="text-12 text-theme mt-4">0 <span>回答</span></div></a></div><div class="a-list-item"><a href="/question/4336" class=""><div class="inner-item"><!----><span class="flex-1">NUXT引入tailwindcss报错Error: Expected an opening square bracket.</span></div><div class="text-12 text-theme mt-4">1 <span>回答</span></div></a></div><!--]--></div></div><div class="c-adsense side-adsense"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-9684175232031230" data-ad-slot="2002754568" data-ad-format="auto" data-full-width-responsive="true"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div></div><!--]--></main><div class="c-footer"><div class="common-footer-inner"><div class="logo-contract"><a href="/" class="inline-flex space-x-8 items-center"><div class="sub-logo"><svg t="1696732448231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6740" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><defs><linearGradient id="left-to-right"><stop offset="0" stop-color="#ed3da1"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop><stop offset="0" stop-color="#ffe9f6"><animate dur="3s" attributeName="offset" fill="freeze" values="-1;2;0" repeatCount="indefinite"></animate></stop></linearGradient></defs><path d="M105.321374 914.265136c-11.700669 0-17.551004-11.702475-17.551003-17.541972 0-5.870203 5.850335-17.551004 11.7097-17.551004 269.155125-111.194286 561.722425-169.684988 848.441196-181.3983v5.839497c23.410369 0 52.662042-5.839497 76.076024-5.839497v11.711506c-292.558269 29.251673-579.284266 87.756824-854.300562 175.535323-17.551004 17.541972-40.964985 23.403144-64.375355 29.244447zM772.382332 580.741882c-29.260704 0-58.514183-5.861172-76.054349-29.240835-17.55281-23.412175-35.123682-46.826157-35.123681-76.079636 0-81.917327 23.403144-157.984319 76.068798-222.350642 46.835188-64.377161 117.042815-111.168999 193.106195-140.433316 29.251673 0 52.654817 17.563647 64.368129 40.954148-5.862978 5.850335-11.711506 11.711506-17.563647 11.711506 29.251673 11.700669 40.952342 35.102007 40.952342 64.366324 5.862978 163.834654-99.459299 310.121916-245.753787 351.072451z m157.996963-374.484627c-11.702475 5.850335-29.273347 17.551004-40.954148 29.264316-5.870203 0-5.870203-5.850335-5.870203-11.711506-87.778499 52.665654-146.281844 146.294487-152.114116 245.742949 0 11.711506 5.832272 52.665654 23.38147 46.835188 29.284184-11.7097 52.662042-23.423013 70.225688-46.835188 19.503523-21.441593 39.00524-42.894024 58.506958-64.344648 35.121876-46.81532 58.535857-105.320471 70.216658-163.847297 11.700669-17.55281-5.848528-29.253479-23.392307-35.103814zM122.872378 288.185419l-64.366323 29.251673c-5.839497 5.839497-11.689832 5.839497-17.540167 5.839497-5.862978 0-5.862978-11.713313-5.862978-17.540166 0-17.551004 11.713313-29.264316 29.273347-35.114651 35.103813-29.264316 70.20582-52.654817 111.158163-70.216657 17.551004 5.850335 29.264316 23.403144 35.11465 40.952341 0 17.540166 0 17.540166-81.919133 204.812282-29.249866 58.505151-52.651204 122.873281-58.523213 187.237798 0 5.852141 5.872009 17.55281 5.872009 23.412176v5.841303c-1.959745 1.948907-3.910458 3.912264-5.872009 5.861172-5.830466 0-11.700669 0-11.700669-5.861172-29.253479 0-52.663848-17.55281-58.505152-46.804482 0-46.813513 11.711506-99.470137 29.251673-140.433316 23.413982-64.366323 58.517795-122.871475 93.619802-187.237798zM637.792126 282.326054c11.700669 157.984319-87.760436 298.417635-239.892614 339.380813-29.264316 0-58.515989-5.850335-76.07783-29.264316-23.401338-17.561841-35.092976-46.813513-35.092976-76.056155 0-81.926358 23.403144-157.99335 76.068798-222.359673 46.804482-64.355486 117.008497-111.159968 193.086327-140.433316 29.242642 0 52.665654 17.551004 64.368129 40.975823-5.852141 5.839497-11.702475 11.689832-17.55281 11.689832 17.551004 17.549197 35.092976 46.811707 35.092976 76.066992z m-81.908295-35.103814c-11.7097 5.850335-29.260704 17.551004-40.963179 29.251673-5.850335 0-5.850335-5.850335-5.850335-11.700669-87.769468 52.665654-146.272813 146.28365-152.135791 245.762818 0 11.680801 5.862978 52.663848 23.413982 46.793645 29.251673-11.702475 52.665654-23.403144 70.20582-46.793645a140273.571944 140273.571944 0 0 0 58.515989-64.366324c35.103813-46.826157 58.514183-105.320471 70.214852-163.84549 11.713313-17.551004-5.839497-29.253479-23.401338-35.102008zM23.414885 808.944665c269.155125-111.170806 561.711587-169.684988 848.437584-181.3983v5.859365c29.251673 0 52.665654-5.859366 76.068798-5.859365v11.711506c-292.558269 29.26251-579.287878 87.778499-854.302368 175.544354-23.413982 11.713313-40.954148 17.554616-64.36813 23.3905h-5.837691c-5.872009 0-11.702475-5.835885-11.702475-17.551003 3.903233-3.896009 7.804661-7.797436 11.704282-11.697057z" fill="url(#left-to-right)" p-id="6741" class="logo-path"></path></svg></div><img class="h-50" src="/logo.svg"></a><div class="contacts"><!--[--><a class="contact-item" href="mailto:yldiswinter@gmail.com"><i class="iconfont icon-youxiang"></i></a><a class="contact-item" href="https://github.com/WinterMain"><i class="iconfont icon-github"></i></a><!--]--></div></div><div class="nav-area"><div class="pr-20"><p class="label"><span class="z-1">导航</span></p></div><div class="nav-items"><!--[--><!--[--><a href="/question" class="nav-item">问答</a><!--]--><!--[--><a href="/blog" class="nav-item">博客</a><!--]--><!--[--><a href="/message" class="nav-item">留言</a><!--]--><!--[--><a class="nav-item" target="_blank" rel="noopener noreferrer" href="https://tools.winter100.com">工具箱</a><!--]--><!--]--></div></div><div class="donate-area"><div class="pr-20"><p class="label"><span class="z-1">打赏</span></p></div><div class="donate-list"><!--[--><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/btc.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">BTC</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2</span></p></div></div><div class="donate-item"><div class="c-common-qrcode"><canvas style="width:60px;height:60px;"></canvas></div><div class="ml-12"><div class="flex items-center mt-4"><img src="/images/eth.png" height="30" class="h-20"><span class="ml-8 text-primary font-w500 text-16 flex-1">ETH</span><!--[--><span class="c-copy el-tooltip__trigger el-tooltip__trigger"><i class="el-icon text-12" style=""><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64z"></path><path fill="currentColor" d="M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64"></path></svg><!--]--></i></span><!--teleport start--><!--teleport end--><!--]--></div><p class="mt-12 text-addr"><span class="">0xff6FC30033269845d196cB48F6a0660598D218D8</span></p></div></div><!--]--></div></div><div class="flex-1 ml-20 flex justify-end xs:hidden"><div class="c-adsense mt-0"><div class="ad-container"><!--[--><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9684175232031230" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block;width:180px;height:180px" data-ad-client="ca-pub-9684175232031230" data-ad-slot="6637798878"></ins><script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><!--]--></div></div></div></div></div><!--v-if--><!--]--></section><!--]--></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr id="__NUXT_DATA__" data-src="/question/843/_payload.json?a4e7ffa4-1106-4b54-8c76-c28eedce6141">[{"state":1,"once":7,"_errors":8,"serverRendered":10,"path":11,"pinia":12,"prerenderedAt":43},["Reactive",2],{"$ssite-config":3},{"env":4,"name":5,"url":6},"production","Winter 100分","https://winter100.com/",["Set"],["ShallowReactive",9],{},true,"/question/843",["Reactive",13],{"lang":14,"main":27},{"langOptions":15,"lang":17,"defaultLang":17},[16,20,23],{"val":17,"text":18,"icon":19},"zh_Hans_CN","简体中文","/images/cn.svg",{"val":21,"text":22,"icon":19},"zh_Hant_HK","繁体中文",{"val":24,"text":25,"icon":26},"en_US","English","/images/en.svg",{"category":28,"nav":29,"likes":30,"donateCoins":31},"browserplugin","all",[],[32,36,40],{"coin":33,"address":34,"icon":35},"BTC","1Q6ZDFC3FueXY3JocmeMqgiSsGGtppbvz2","/images/btc.png",{"coin":37,"address":38,"icon":39},"ETH","0xff6FC30033269845d196cB48F6a0660598D218D8","/images/eth.png",{"coin":41,"address":38,"icon":42},"CET","/images/cet.png",1728924605656]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{MODE:"",NODE_ENV:"production",NAME:"winter100"},app:{baseURL:"/",buildId:"a4e7ffa4-1106-4b54-8c76-c28eedce6141",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>